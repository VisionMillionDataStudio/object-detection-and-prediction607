# æ–‡æ¡£å¸ƒå±€å†…å®¹æ£€æµ‹æ£€æµ‹ç³»ç»Ÿæºç åˆ†äº«
 # [ä¸€æ¡é¾™æ•™å­¦YOLOV8æ ‡æ³¨å¥½çš„æ•°æ®é›†ä¸€é”®è®­ç»ƒ_70+å…¨å¥—æ”¹è¿›åˆ›æ–°ç‚¹å‘åˆŠ_Webå‰ç«¯å±•ç¤º]

### 1.ç ”ç©¶èƒŒæ™¯ä¸æ„ä¹‰

é¡¹ç›®å‚è€ƒ[AAAI Association for the Advancement of Artificial Intelligence](https://gitee.com/qunmasj/projects)

é¡¹ç›®æ¥æº[AACV Association for the Advancement of Computer Vision](https://kdocs.cn/l/cszuIiCKVNis)

ç ”ç©¶èƒŒæ™¯ä¸æ„ä¹‰

éšç€ä¿¡æ¯æŠ€æœ¯çš„è¿…çŒ›å‘å±•ï¼Œæ–‡æ¡£çš„æ•°å­—åŒ–å’Œè‡ªåŠ¨åŒ–å¤„ç†å·²æˆä¸ºå„è¡Œä¸šæå‡å·¥ä½œæ•ˆç‡çš„é‡è¦æ‰‹æ®µã€‚æ–‡æ¡£å¸ƒå±€å†…å®¹æ£€æµ‹ç³»ç»Ÿçš„ç ”ç©¶ï¼Œæ—¨åœ¨é€šè¿‡è®¡ç®—æœºè§†è§‰æŠ€æœ¯è‡ªåŠ¨è¯†åˆ«å’Œè§£ææ–‡æ¡£ä¸­çš„å„ç§å…ƒç´ ï¼Œä»è€Œå®ç°å¯¹æ–‡æ¡£å†…å®¹çš„æ™ºèƒ½åŒ–ç®¡ç†ä¸å¤„ç†ã€‚è¿‘å¹´æ¥ï¼Œæ·±åº¦å­¦ä¹ æŠ€æœ¯çš„å¿«é€Ÿè¿›æ­¥ä¸ºæ–‡æ¡£å¸ƒå±€åˆ†ææä¾›äº†æ–°çš„æœºé‡ï¼Œå…¶ä¸­åŸºäºYOLOï¼ˆYou Only Look Onceï¼‰ç³»åˆ—æ¨¡å‹çš„ç›®æ ‡æ£€æµ‹æ–¹æ³•å› å…¶é«˜æ•ˆæ€§å’Œå‡†ç¡®æ€§è€Œå¤‡å—å…³æ³¨ã€‚YOLOv8ä½œä¸ºè¯¥ç³»åˆ—çš„æœ€æ–°ç‰ˆæœ¬ï¼Œè¿›ä¸€æ­¥æå‡äº†ç›®æ ‡æ£€æµ‹çš„é€Ÿåº¦å’Œç²¾åº¦ï¼Œä¸ºæ–‡æ¡£å¸ƒå±€å†…å®¹æ£€æµ‹æä¾›äº†å¼ºæœ‰åŠ›çš„æŠ€æœ¯æ”¯æŒã€‚

åœ¨æ–‡æ¡£å¸ƒå±€åˆ†æä¸­ï¼Œå¸¸è§çš„å…ƒç´ åŒ…æ‹¬æ ‡é¢˜ã€æ®µè½ã€å›¾åƒã€æµç¨‹å›¾ã€è„šæ³¨ç­‰ï¼Œè¿™äº›å…ƒç´ çš„å‡†ç¡®è¯†åˆ«å¯¹äºæ–‡æ¡£çš„ç†è§£å’Œåç»­å¤„ç†è‡³å…³é‡è¦ã€‚ä»¥æˆ‘ä»¬æ‰€ä½¿ç”¨çš„æ•°æ®é›†ä¸ºä¾‹ï¼ŒåŒ…å«1750å¼ å›¾åƒï¼Œæ¶µç›–äº†9ä¸ªç±»åˆ«ï¼ŒåŒ…æ‹¬å­å¼¹æ­£æ–‡ã€æµç¨‹å›¾ã€è„šæ³¨ã€å›¾åƒã€æ ‡å¿—ã€æ®µè½ã€å­æ ‡é¢˜ã€æ ‡é¢˜åŠå…¶ä»–å¯¹è±¡ã€‚è¿™äº›ç±»åˆ«çš„å¤šæ ·æ€§ä¸ºæ¨¡å‹çš„è®­ç»ƒæä¾›äº†ä¸°å¯Œçš„æ ·æœ¬ï¼Œæœ‰åŠ©äºæé«˜æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›å’Œå®ç”¨æ€§ã€‚

å½“å‰ï¼Œä¼ ç»Ÿçš„æ–‡æ¡£å¤„ç†æ–¹æ³•å¾€å¾€ä¾èµ–äºæ‰‹å·¥è®¾è®¡çš„ç‰¹å¾æå–ç®—æ³•ï¼Œéš¾ä»¥é€‚åº”å¤šæ ·åŒ–çš„æ–‡æ¡£æ ¼å¼å’Œå¸ƒå±€ï¼Œä¸”å¤„ç†æ•ˆç‡ä½ä¸‹ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼ŒåŸºäºYOLOv8çš„æ”¹è¿›æ¨¡å‹èƒ½å¤Ÿé€šè¿‡æ·±åº¦å­¦ä¹ è‡ªåŠ¨æå–ç‰¹å¾ï¼Œå¿«é€Ÿå‡†ç¡®åœ°è¯†åˆ«æ–‡æ¡£ä¸­çš„å„ç±»å…ƒç´ ï¼Œæå¤§åœ°æå‡äº†æ–‡æ¡£å¤„ç†çš„è‡ªåŠ¨åŒ–æ°´å¹³ã€‚æ­¤å¤–ï¼ŒYOLOv8çš„å®æ—¶æ£€æµ‹èƒ½åŠ›ä½¿å¾—è¯¥ç³»ç»Ÿåœ¨å®é™…åº”ç”¨ä¸­å…·å¤‡äº†è‰¯å¥½çš„ç”¨æˆ·ä½“éªŒï¼Œèƒ½å¤Ÿæ»¡è¶³å¿«é€Ÿå¤„ç†å’Œé«˜å‡†ç¡®ç‡çš„éœ€æ±‚ã€‚

åœ¨å®é™…åº”ç”¨ä¸­ï¼Œæ–‡æ¡£å¸ƒå±€å†…å®¹æ£€æµ‹ç³»ç»Ÿçš„ç ”ç©¶ä¸ä»…èƒ½å¤Ÿæé«˜æ–‡æ¡£å¤„ç†çš„æ•ˆç‡ï¼Œè¿˜èƒ½å¤Ÿä¸ºä¿¡æ¯æ£€ç´¢ã€æ–‡æ¡£å½’æ¡£ã€å†…å®¹åˆ†æç­‰é¢†åŸŸæä¾›æœ‰åŠ›æ”¯æŒã€‚é€šè¿‡å¯¹æ–‡æ¡£ä¸­å„ç±»å…ƒç´ çš„è‡ªåŠ¨è¯†åˆ«ä¸åˆ†ç±»ï¼Œç”¨æˆ·å¯ä»¥æ›´æ–¹ä¾¿åœ°è¿›è¡Œä¿¡æ¯çš„æå–ä¸åˆ©ç”¨ï¼Œè¿›è€Œæå‡å†³ç­–çš„æ•ˆç‡å’Œå‡†ç¡®æ€§ã€‚æ­¤å¤–ï¼Œè¯¥ç³»ç»Ÿçš„ç ”ç©¶æˆæœä¹Ÿå¯ä¸ºç›¸å…³é¢†åŸŸçš„ç ”ç©¶æä¾›å€Ÿé‰´ï¼Œæ¨åŠ¨æ–‡æ¡£æ™ºèƒ½åŒ–å¤„ç†æŠ€æœ¯çš„è¿›ä¸€æ­¥å‘å±•ã€‚

ç»¼ä¸Šæ‰€è¿°ï¼ŒåŸºäºæ”¹è¿›YOLOv8çš„æ–‡æ¡£å¸ƒå±€å†…å®¹æ£€æµ‹ç³»ç»Ÿçš„ç ”ç©¶å…·æœ‰é‡è¦çš„ç†è®ºæ„ä¹‰å’Œå¹¿æ³›çš„åº”ç”¨å‰æ™¯ã€‚é€šè¿‡å¯¹æ–‡æ¡£å†…å®¹çš„è‡ªåŠ¨æ£€æµ‹ä¸åˆ†æï¼Œæˆ‘ä»¬ä¸ä»…èƒ½å¤Ÿæå‡æ–‡æ¡£å¤„ç†çš„æ•ˆç‡ï¼Œè¿˜èƒ½å¤Ÿä¸ºä¿¡æ¯åŒ–ç¤¾ä¼šçš„å‘å±•è´¡çŒ®åŠ›é‡ã€‚æœªæ¥ï¼Œéšç€æ•°æ®é›†çš„ä¸æ–­ä¸°å¯Œå’Œæ¨¡å‹æŠ€æœ¯çš„ä¸æ–­è¿›æ­¥ï¼Œè¯¥ç³»ç»Ÿæœ‰æœ›åœ¨æ›´å¤šå®é™…åœºæ™¯ä¸­å¾—åˆ°åº”ç”¨ï¼Œä¸ºå„è¡Œä¸šçš„æ•°å­—åŒ–è½¬å‹æä¾›å¼ºæœ‰åŠ›çš„æ”¯æŒã€‚

### 2.å›¾ç‰‡æ¼”ç¤º

![1.png](1.png)

![2.png](2.png)

![3.png](3.png)

##### æ³¨æ„ï¼šç”±äºæ­¤åšå®¢ç¼–è¾‘è¾ƒæ—©ï¼Œä¸Šé¢â€œ2.å›¾ç‰‡æ¼”ç¤ºâ€å’Œâ€œ3.è§†é¢‘æ¼”ç¤ºâ€å±•ç¤ºçš„ç³»ç»Ÿå›¾ç‰‡æˆ–è€…è§†é¢‘å¯èƒ½ä¸ºè€ç‰ˆæœ¬ï¼Œæ–°ç‰ˆæœ¬åœ¨è€ç‰ˆæœ¬çš„åŸºç¡€ä¸Šå‡çº§å¦‚ä¸‹ï¼šï¼ˆå®é™…æ•ˆæœä»¥å‡çº§çš„æ–°ç‰ˆæœ¬ä¸ºå‡†ï¼‰

  ï¼ˆ1ï¼‰é€‚é…äº†YOLOV8çš„â€œç›®æ ‡æ£€æµ‹â€æ¨¡å‹å’Œâ€œå®ä¾‹åˆ†å‰²â€æ¨¡å‹ï¼Œé€šè¿‡åŠ è½½ç›¸åº”çš„æƒé‡ï¼ˆ.ptï¼‰æ–‡ä»¶å³å¯è‡ªé€‚åº”åŠ è½½æ¨¡å‹ã€‚

  ï¼ˆ2ï¼‰æ”¯æŒâ€œå›¾ç‰‡è¯†åˆ«â€ã€â€œè§†é¢‘è¯†åˆ«â€ã€â€œæ‘„åƒå¤´å®æ—¶è¯†åˆ«â€ä¸‰ç§è¯†åˆ«æ¨¡å¼ã€‚

  ï¼ˆ3ï¼‰æ”¯æŒâ€œå›¾ç‰‡è¯†åˆ«â€ã€â€œè§†é¢‘è¯†åˆ«â€ã€â€œæ‘„åƒå¤´å®æ—¶è¯†åˆ«â€ä¸‰ç§è¯†åˆ«ç»“æœä¿å­˜å¯¼å‡ºï¼Œè§£å†³æ‰‹åŠ¨å¯¼å‡ºï¼ˆå®¹æ˜“å¡é¡¿å‡ºç°çˆ†å†…å­˜ï¼‰å­˜åœ¨çš„é—®é¢˜ï¼Œè¯†åˆ«å®Œè‡ªåŠ¨ä¿å­˜ç»“æœå¹¶å¯¼å‡ºåˆ°tempDirä¸­ã€‚

  ï¼ˆ4ï¼‰æ”¯æŒWebå‰ç«¯ç³»ç»Ÿä¸­çš„æ ‡é¢˜ã€èƒŒæ™¯å›¾ç­‰è‡ªå®šä¹‰ä¿®æ”¹ï¼Œåé¢æä¾›ä¿®æ”¹æ•™ç¨‹ã€‚

  å¦å¤–æœ¬é¡¹ç›®æä¾›è®­ç»ƒçš„æ•°æ®é›†å’Œè®­ç»ƒæ•™ç¨‹,æš‚ä¸æä¾›æƒé‡æ–‡ä»¶ï¼ˆbest.ptï¼‰,éœ€è¦æ‚¨æŒ‰ç…§æ•™ç¨‹è¿›è¡Œè®­ç»ƒåå®ç°å›¾ç‰‡æ¼”ç¤ºå’ŒWebå‰ç«¯ç•Œé¢æ¼”ç¤ºçš„æ•ˆæœã€‚

### 3.è§†é¢‘æ¼”ç¤º

[3.1 è§†é¢‘æ¼”ç¤º](https://www.bilibili.com/video/BV1GYtUeXEcC/)

### 4.æ•°æ®é›†ä¿¡æ¯å±•ç¤º

##### 4.1 æœ¬é¡¹ç›®æ•°æ®é›†è¯¦ç»†æ•°æ®ï¼ˆç±»åˆ«æ•°ï¼†ç±»åˆ«åï¼‰

nc: 8
names: ['Bullet Body', 'Flowchart', 'Footer', 'Image', 'Logo', 'Paragraph', 'Subtitle', 'Title']


##### 4.2 æœ¬é¡¹ç›®æ•°æ®é›†ä¿¡æ¯ä»‹ç»

æ•°æ®é›†ä¿¡æ¯å±•ç¤º

åœ¨ç°ä»£æ–‡æ¡£å¤„ç†ä¸åˆ†æé¢†åŸŸï¼Œæ–‡æ¡£å¸ƒå±€å†…å®¹æ£€æµ‹ç³»ç»Ÿçš„æœ‰æ•ˆæ€§ä¾èµ–äºé«˜è´¨é‡çš„æ•°æ®é›†ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬æ„å»ºäº†ä¸€ä¸ªåä¸ºâ€œobject detection and predictionâ€çš„æ•°æ®é›†ï¼Œæ—¨åœ¨ä¸ºæ”¹è¿›YOLOv8æ¨¡å‹æä¾›å¼ºæœ‰åŠ›çš„æ”¯æŒã€‚è¯¥æ•°æ®é›†ä¸“æ³¨äºæ–‡æ¡£ä¸­çš„ç‰¹å®šå…ƒç´ ï¼Œæ¶µç›–äº†å…«ä¸ªç±»åˆ«ï¼Œåˆ†åˆ«æ˜¯ï¼šBullet Bodyã€Flowchartã€Footerã€Imageã€Logoã€Paragraphã€Subtitleå’ŒTitleã€‚è¿™äº›ç±»åˆ«çš„é€‰æ‹©ä¸ä»…åæ˜ äº†æ–‡æ¡£å¸ƒå±€çš„å¤šæ ·æ€§ï¼Œä¹Ÿä¸ºæ¨¡å‹çš„è®­ç»ƒæä¾›äº†ä¸°å¯Œçš„æ ·æœ¬ï¼Œå¸®åŠ©å…¶æ›´å¥½åœ°ç†è§£å’Œè¯†åˆ«æ–‡æ¡£ä¸­çš„ä¸åŒç»„æˆéƒ¨åˆ†ã€‚

åœ¨æ•°æ®é›†çš„æ„å»ºè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ç²¾å¿ƒæŒ‘é€‰äº†å„ç§ç±»å‹çš„æ–‡æ¡£ï¼Œç¡®ä¿æ¯ä¸ªç±»åˆ«éƒ½æœ‰è¶³å¤Ÿçš„æ ·æœ¬é‡ï¼Œä»¥ä¾¿æ¨¡å‹èƒ½å¤Ÿå­¦ä¹ åˆ°æ¯ç§å…ƒç´ çš„ç‰¹å¾ã€‚ä¾‹å¦‚ï¼ŒBullet Bodyç±»åˆ«åŒ…æ‹¬äº†å„ç§å½¢å¼çš„é¡¹ç›®ç¬¦å·åˆ—è¡¨ï¼Œè¿™åœ¨æŠ€æœ¯æ–‡æ¡£å’ŒæŠ¥å‘Šä¸­éå¸¸å¸¸è§ï¼›Flowchartç±»åˆ«åˆ™åŒ…å«äº†å¤šç§æµç¨‹å›¾çš„ç¤ºä¾‹ï¼Œå¸®åŠ©æ¨¡å‹è¯†åˆ«å¤æ‚çš„é€»è¾‘å…³ç³»ï¼›Footerç±»åˆ«åˆ™é›†ä¸­åœ¨æ–‡æ¡£åº•éƒ¨çš„é™„åŠ ä¿¡æ¯ï¼Œå¦‚é¡µç å’Œç‰ˆæƒå£°æ˜ï¼›è€ŒImageç±»åˆ«åˆ™æ¶µç›–äº†å„ç§å›¾åƒï¼Œç¡®ä¿æ¨¡å‹èƒ½å¤Ÿè¯†åˆ«å¹¶å¤„ç†å›¾åƒå†…å®¹ã€‚

æ­¤å¤–ï¼ŒLogoç±»åˆ«çš„æ ·æœ¬å±•ç¤ºäº†å“ç‰Œæ ‡è¯†çš„å¤šæ ·æ€§ï¼Œèƒ½å¤Ÿå¸®åŠ©æ¨¡å‹å­¦ä¹ åˆ°ä¸åŒçš„å›¾å½¢ç‰¹å¾å’Œé¢œè‰²ç»„åˆã€‚Paragraphç±»åˆ«åˆ™åŒ…å«äº†ä¸åŒæ ¼å¼çš„æ®µè½æ–‡æœ¬ï¼Œæ¨¡å‹éœ€è¦èƒ½å¤Ÿå¤„ç†ä¸åŒçš„æ–‡æœ¬æ’ç‰ˆå’Œæ ·å¼ï¼›Subtitleå’ŒTitleç±»åˆ«åˆ™å¸®åŠ©æ¨¡å‹è¯†åˆ«æ–‡æ¡£ä¸­çš„æ ‡é¢˜å’Œå‰¯æ ‡é¢˜ï¼Œè¿™å¯¹äºç†è§£æ–‡æ¡£ç»“æ„è‡³å…³é‡è¦ã€‚

ä¸ºäº†ç¡®ä¿æ•°æ®é›†çš„å¤šæ ·æ€§å’Œä»£è¡¨æ€§ï¼Œæˆ‘ä»¬åœ¨æ”¶é›†æ ·æœ¬æ—¶è€ƒè™‘äº†ä¸åŒçš„æ–‡æ¡£ç±»å‹ï¼ŒåŒ…æ‹¬å­¦æœ¯è®ºæ–‡ã€å•†ä¸šæŠ¥å‘Šã€å®£ä¼ å†Œå’Œç”¨æˆ·æ‰‹å†Œç­‰ã€‚è¿™ç§å¤šæ ·æ€§ä¸ä»…å¢å¼ºäº†æ•°æ®é›†çš„é€‚ç”¨æ€§ï¼Œä¹Ÿä¸ºæ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›æä¾›äº†ä¿éšœã€‚æ¯ä¸ªç±»åˆ«çš„æ ·æœ¬éƒ½ç»è¿‡ç²¾å¿ƒæ ‡æ³¨ï¼Œç¡®ä¿æ¯ä¸ªå…ƒç´ çš„è¾¹ç•Œæ¡†å‡†ç¡®æ— è¯¯ï¼Œè¿™å¯¹äºè®­ç»ƒYOLOv8æ¨¡å‹è‡³å…³é‡è¦ã€‚

åœ¨æ•°æ®é›†çš„ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œç ”ç©¶äººå‘˜å’Œå¼€å‘è€…å¯ä»¥åˆ©ç”¨è¿™äº›æ ‡æ³¨æ•°æ®è¿›è¡Œæ¨¡å‹è®­ç»ƒå’Œè¯„ä¼°ï¼Œè¿›è€Œæé«˜æ–‡æ¡£å¸ƒå±€å†…å®¹æ£€æµ‹çš„å‡†ç¡®æ€§å’Œæ•ˆç‡ã€‚é€šè¿‡ä¸æ–­è¿­ä»£å’Œä¼˜åŒ–æ¨¡å‹ï¼Œæœ€ç»ˆç›®æ ‡æ˜¯å®ç°å¯¹æ–‡æ¡£å†…å®¹çš„æ™ºèƒ½åˆ†æï¼Œå¸®åŠ©ç”¨æˆ·å¿«é€Ÿæå–å’Œç†è§£å…³é”®ä¿¡æ¯ã€‚

æ€»ä¹‹ï¼Œâ€œobject detection and predictionâ€æ•°æ®é›†ä¸ä»…ä¸ºYOLOv8æ¨¡å‹çš„è®­ç»ƒæä¾›äº†åšå®çš„åŸºç¡€ï¼Œä¹Ÿä¸ºæ–‡æ¡£å¤„ç†é¢†åŸŸçš„ç ”ç©¶ä¸åº”ç”¨å¼€è¾Ÿäº†æ–°çš„å¯èƒ½æ€§ã€‚éšç€æ•°æ®é›†çš„ä¸æ–­æ‰©å±•å’Œæ›´æ–°ï¼Œæˆ‘ä»¬æœŸå¾…çœ‹åˆ°æ›´å¤šåˆ›æ–°çš„åº”ç”¨åœºæ™¯ï¼Œæ¨åŠ¨æ–‡æ¡£æ™ºèƒ½åŒ–å¤„ç†çš„è¿›ç¨‹ã€‚

![4.png](4.png)

![5.png](5.png)

![6.png](6.png)

![7.png](7.png)

![8.png](8.png)

### 5.å…¨å¥—é¡¹ç›®ç¯å¢ƒéƒ¨ç½²è§†é¢‘æ•™ç¨‹ï¼ˆé›¶åŸºç¡€æ‰‹æŠŠæ‰‹æ•™å­¦ï¼‰

[5.1 ç¯å¢ƒéƒ¨ç½²æ•™ç¨‹é“¾æ¥ï¼ˆé›¶åŸºç¡€æ‰‹æŠŠæ‰‹æ•™å­¦ï¼‰](https://www.ixigua.com/7404473917358506534?logTag=c807d0cbc21c0ef59de5)




[5.2 å®‰è£…Pythonè™šæ‹Ÿç¯å¢ƒåˆ›å»ºå’Œä¾èµ–åº“å®‰è£…è§†é¢‘æ•™ç¨‹é“¾æ¥ï¼ˆé›¶åŸºç¡€æ‰‹æŠŠæ‰‹æ•™å­¦ï¼‰](https://www.ixigua.com/7404474678003106304?logTag=1f1041108cd1f708b01a)

### 6.æ‰‹æŠŠæ‰‹YOLOV8è®­ç»ƒè§†é¢‘æ•™ç¨‹ï¼ˆé›¶åŸºç¡€å°ç™½æœ‰æ‰‹å°±èƒ½å­¦ä¼šï¼‰

[6.1 æ‰‹æŠŠæ‰‹YOLOV8è®­ç»ƒè§†é¢‘æ•™ç¨‹ï¼ˆé›¶åŸºç¡€å°ç™½æœ‰æ‰‹å°±èƒ½å­¦ä¼šï¼‰](https://www.ixigua.com/7404477157818401292?logTag=d31a2dfd1983c9668658)

### 7.70+ç§å…¨å¥—YOLOV8åˆ›æ–°ç‚¹ä»£ç åŠ è½½è°ƒå‚è§†é¢‘æ•™ç¨‹ï¼ˆä¸€é”®åŠ è½½å†™å¥½çš„æ”¹è¿›æ¨¡å‹çš„é…ç½®æ–‡ä»¶ï¼‰

[7.1 70+ç§å…¨å¥—YOLOV8åˆ›æ–°ç‚¹ä»£ç åŠ è½½è°ƒå‚è§†é¢‘æ•™ç¨‹ï¼ˆä¸€é”®åŠ è½½å†™å¥½çš„æ”¹è¿›æ¨¡å‹çš„é…ç½®æ–‡ä»¶ï¼‰](https://www.ixigua.com/7404478314661806627?logTag=29066f8288e3f4eea3a4)

### 8.70+ç§å…¨å¥—YOLOV8åˆ›æ–°ç‚¹åŸç†è®²è§£ï¼ˆéç§‘ç­ä¹Ÿå¯ä»¥è½»æ¾å†™åˆŠå‘åˆŠï¼ŒV10ç‰ˆæœ¬æ­£åœ¨ç§‘ç ”å¾…æ›´æ–°ï¼‰

ç”±äºç¯‡å¹…é™åˆ¶ï¼Œæ¯ä¸ªåˆ›æ–°ç‚¹çš„å…·ä½“åŸç†è®²è§£å°±ä¸ä¸€ä¸€å±•å¼€ï¼Œå…·ä½“è§ä¸‹åˆ—ç½‘å€ä¸­çš„åˆ›æ–°ç‚¹å¯¹åº”å­é¡¹ç›®çš„æŠ€æœ¯åŸç†åšå®¢ç½‘å€ã€Blogã€‘ï¼š

![9.png](9.png)

[8.1 70+ç§å…¨å¥—YOLOV8åˆ›æ–°ç‚¹åŸç†è®²è§£é“¾æ¥](https://gitee.com/qunmasj/good)

### 9.ç³»ç»ŸåŠŸèƒ½å±•ç¤ºï¼ˆæ£€æµ‹å¯¹è±¡ä¸ºä¸¾ä¾‹ï¼Œå®é™…å†…å®¹ä»¥æœ¬é¡¹ç›®æ•°æ®é›†ä¸ºå‡†ï¼‰

å›¾9.1.ç³»ç»Ÿæ”¯æŒæ£€æµ‹ç»“æœè¡¨æ ¼æ˜¾ç¤º

  å›¾9.2.ç³»ç»Ÿæ”¯æŒç½®ä¿¡åº¦å’ŒIOUé˜ˆå€¼æ‰‹åŠ¨è°ƒèŠ‚

  å›¾9.3.ç³»ç»Ÿæ”¯æŒè‡ªå®šä¹‰åŠ è½½æƒé‡æ–‡ä»¶best.pt(éœ€è¦ä½ é€šè¿‡æ­¥éª¤5ä¸­è®­ç»ƒè·å¾—)

  å›¾9.4.ç³»ç»Ÿæ”¯æŒæ‘„åƒå¤´å®æ—¶è¯†åˆ«

  å›¾9.5.ç³»ç»Ÿæ”¯æŒå›¾ç‰‡è¯†åˆ«

  å›¾9.6.ç³»ç»Ÿæ”¯æŒè§†é¢‘è¯†åˆ«

  å›¾9.7.ç³»ç»Ÿæ”¯æŒè¯†åˆ«ç»“æœæ–‡ä»¶è‡ªåŠ¨ä¿å­˜

  å›¾9.8.ç³»ç»Ÿæ”¯æŒExcelå¯¼å‡ºæ£€æµ‹ç»“æœæ•°æ®

![10.png](10.png)

![11.png](11.png)

![12.png](12.png)

![13.png](13.png)

![14.png](14.png)

![15.png](15.png)

![16.png](16.png)

![17.png](17.png)

### 10.åŸå§‹YOLOV8ç®—æ³•åŸç†

åŸå§‹YOLOv8ç®—æ³•åŸç†

YOLOv8ç®—æ³•æ˜¯ç›®æ ‡æ£€æµ‹é¢†åŸŸçš„ä¸€é¡¹é‡è¦è¿›å±•ï¼Œç»§æ‰¿äº†YOLOç³»åˆ—ç®—æ³•çš„ä¼˜è‰¯ä¼ ç»Ÿï¼Œå¹¶åœ¨æ­¤åŸºç¡€ä¸Šè¿›è¡Œäº†å¤šæ–¹é¢çš„ä¼˜åŒ–å’Œæ”¹è¿›ã€‚ä½œä¸ºä¸€ç§å•é˜¶æ®µæ£€æµ‹ç®—æ³•ï¼ŒYOLOv8åœ¨æ£€æµ‹ç²¾åº¦å’Œé€Ÿåº¦ä¸Šéƒ½è¡¨ç°å‡ºäº†æ˜¾è‘—çš„ä¼˜åŠ¿ï¼Œé€‚åº”äº†ç°ä»£è®¡ç®—æœºè§†è§‰ä»»åŠ¡çš„éœ€æ±‚ã€‚å…¶æ ¸å¿ƒæ€æƒ³æ˜¯é€šè¿‡é«˜æ•ˆçš„ç‰¹å¾æå–å’Œèåˆç­–ç•¥ï¼Œå¿«é€Ÿè€Œå‡†ç¡®åœ°è¯†åˆ«å’Œå®šä½å›¾åƒä¸­çš„ç›®æ ‡ã€‚

YOLOv8çš„ç½‘ç»œç»“æ„ä¸»è¦ç”±å››ä¸ªéƒ¨åˆ†ç»„æˆï¼šè¾“å…¥æ¨¡å—ã€Backboneéª¨å¹²ç½‘ç»œã€Neckç‰¹å¾èåˆç½‘ç»œå’ŒHeadæ£€æµ‹æ¨¡å—ã€‚è¾“å…¥æ¨¡å—è´Ÿè´£å¯¹è¾“å…¥å›¾åƒè¿›è¡Œé¢„å¤„ç†ï¼ŒåŒ…æ‹¬è°ƒæ•´å›¾åƒæ¯”ä¾‹ã€å®ç°Mosaicå¢å¼ºå’Œç„ç‚¹è®¡ç®—ç­‰ã€‚è¿™äº›é¢„å¤„ç†æ­¥éª¤ä¸ä»…æé«˜äº†æ•°æ®çš„å¤šæ ·æ€§ï¼Œè¿˜å¢å¼ºäº†æ¨¡å‹çš„é²æ£’æ€§ï¼Œä½¿å…¶èƒ½å¤Ÿåœ¨ä¸åŒçš„ç¯å¢ƒå’Œæ¡ä»¶ä¸‹è¿›è¡Œæœ‰æ•ˆçš„ç›®æ ‡æ£€æµ‹ã€‚

åœ¨Backboneéª¨å¹²ç½‘ç»œä¸­ï¼ŒYOLOv8æ²¿ç”¨äº†DarkNetç»“æ„ï¼Œä½†è¿›è¡Œäº†é‡è¦çš„æ”¹è¿›ã€‚YOLOv8ç”¨C2fæ¨¡å—æ›¿æ¢äº†YOLOv5ä¸­çš„C3æ¨¡å—ï¼ŒC2fæ¨¡å—é€šè¿‡å¼•å…¥æ›´å¤šçš„åˆ†æ”¯æ¥ä¸°å¯Œæ¢¯åº¦æµåŠ¨ä¿¡æ¯ï¼Œä»è€Œæé«˜äº†ç‰¹å¾æå–çš„èƒ½åŠ›ã€‚è¿™ç§è®¾è®¡ä¸ä»…ä¿ç•™äº†è½»é‡çº§ç‰¹æ€§ï¼Œè¿˜åœ¨ä¸åŒå°ºåº¦æ¨¡å‹ä¸­è°ƒæ•´äº†é€šé“æ•°ï¼Œä»¥é€‚åº”ä¸åŒçš„æ£€æµ‹ä»»åŠ¡ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼ŒYOLOv8èƒ½å¤Ÿæ›´å¥½åœ°æ•æ‰åˆ°å›¾åƒä¸­çš„ç»†èŠ‚ç‰¹å¾ï¼Œæå‡äº†ç›®æ ‡æ£€æµ‹çš„ç²¾åº¦ã€‚

åœ¨ç‰¹å¾èåˆæ–¹é¢ï¼ŒYOLOv8é‡‡ç”¨äº†FPNï¼ˆç‰¹å¾é‡‘å­—å¡”ç½‘ç»œï¼‰å’ŒPANï¼ˆè·¯å¾„èšåˆç½‘ç»œï¼‰çš„åŒå¡”ç»“æ„ï¼Œè¿›ä¸€æ­¥ä¿ƒè¿›äº†è¯­ä¹‰ç‰¹å¾å’Œå®šä½ç‰¹å¾ä¹‹é—´çš„è½¬ç§»ã€‚è¿™ç§ç»“æ„çš„è®¾è®¡ä½¿å¾—YOLOv8èƒ½å¤Ÿåœ¨å¤šå°ºåº¦ä¿¡æ¯ä¹‹é—´è¿›è¡Œå……åˆ†çš„èåˆï¼Œä»è€Œå¢å¼ºäº†å¯¹ä¸åŒå°ºåº¦ç›®æ ‡çš„æ£€æµ‹æ€§èƒ½ã€‚é€šè¿‡å¯¹ç‰¹å¾å›¾çš„å¤„ç†ï¼ŒYOLOv8èƒ½å¤Ÿæœ‰æ•ˆåœ°æ•´åˆæ¥è‡ªä¸åŒå±‚æ¬¡çš„ä¿¡æ¯ï¼Œç¡®ä¿åœ¨æ£€æµ‹è¿‡ç¨‹ä¸­ä¸ä¼šä¸¢å¤±é‡è¦çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚

YOLOv8çš„Headæ£€æµ‹æ¨¡å—é‡‡ç”¨äº†è§£è€¦å¤´çš„ç»“æ„ï¼Œå°†å›å½’åˆ†æ”¯å’Œé¢„æµ‹åˆ†æ”¯è¿›è¡Œåˆ†ç¦»ã€‚è¿™ç§è®¾è®¡ä½¿å¾—æ¨¡å‹åœ¨è¿›è¡Œç›®æ ‡æ£€æµ‹æ—¶èƒ½å¤Ÿæ›´åŠ é«˜æ•ˆï¼Œå‡å°‘äº†è®­ç»ƒå’Œæ¨ç†è¿‡ç¨‹ä¸­çš„è®¡ç®—å¤æ‚åº¦ã€‚è§£è€¦å¤´çš„å¼•å…¥ï¼Œä½¿å¾—YOLOv8èƒ½å¤Ÿç‹¬ç«‹åœ°å¤„ç†åˆ†ç±»å’Œå®šä½ä»»åŠ¡ï¼Œä»è€ŒåŠ é€Ÿäº†æ¨¡å‹çš„æ”¶æ•›ï¼Œæé«˜äº†æ£€æµ‹çš„å‡†ç¡®æ€§ã€‚

åœ¨æŸå¤±å‡½æ•°çš„è®¾è®¡ä¸Šï¼ŒYOLOv8å¼•å…¥äº†æ–°çš„æŸå¤±ç­–ç•¥ï¼Œé€šè¿‡å˜ç„¦æŸå¤±è®¡ç®—åˆ†ç±»æŸå¤±ï¼Œå¹¶ä½¿ç”¨æ•°æ®å¹³å‡ä¿çœŸåº¦æŸå¤±å’Œå®Œç¾äº¤å¹¶æ¯”æŸå¤±å¯¹è¾¹ç•Œæ¡†æŸå¤±è¿›è¡Œè®¡ç®—ã€‚è¿™ç§ç­–ç•¥ä½¿å¾—YOLOv8åœ¨å¤„ç†ç›®æ ‡æ£€æµ‹ä»»åŠ¡æ—¶ï¼Œèƒ½å¤Ÿæ›´åŠ å‡†ç¡®åœ°è¿›è¡Œç›®æ ‡å®šä½å’Œåˆ†ç±»ã€‚ä¸ä»¥å¾€çš„YOLOç‰ˆæœ¬ç›¸æ¯”ï¼ŒYOLOv8åœ¨æ ‡ç­¾åˆ†é…ç­–ç•¥ä¸Šä¹Ÿè¿›è¡Œäº†åˆ›æ–°ï¼Œé‡‡ç”¨äº†åŠ¨æ€æ ‡ç­¾åˆ†é…ç­–ç•¥ï¼Œä»¥æ›´å¥½åœ°é€‚åº”ä¸åŒæ•°æ®é›†çš„ç‰¹å¾ã€‚è¿™ç§ç­–ç•¥çš„å¼•å…¥ï¼Œè§£å†³äº†ä¼ ç»Ÿæ–¹æ³•ä¸­å€™é€‰æ¡†èšç±»ä¾èµ–äºæ•°æ®é›†çš„é—®é¢˜ï¼Œä½¿å¾—YOLOv8åœ¨å„ç§åœºæ™¯ä¸‹éƒ½èƒ½ä¿æŒè‰¯å¥½çš„æ€§èƒ½ã€‚

YOLOv8çš„è®¾è®¡ç†å¿µä¸ä»…å…³æ³¨äºæ¨¡å‹çš„å¤æ‚åº¦å’Œè®¡ç®—æ•ˆç‡ï¼Œè¿˜å¼ºè°ƒäº†æ¨¡å‹çš„å¯æ‰©å±•æ€§å’Œé€‚åº”æ€§ã€‚é€šè¿‡å¯¹ç½‘ç»œç»“æ„çš„ä¼˜åŒ–å’ŒæŸå¤±å‡½æ•°çš„æ”¹è¿›ï¼ŒYOLOv8èƒ½å¤Ÿåœ¨é«˜æ•ˆçš„åŸºç¡€ä¸Šï¼Œå®ç°å‡†ç¡®çš„ç›®æ ‡æ£€æµ‹ã€‚è¿™ç§è®¾è®¡ä½¿å¾—YOLOv8åœ¨å®é™…åº”ç”¨ä¸­è¡¨ç°å‡ºè‰²ï¼Œèƒ½å¤Ÿæ»¡è¶³å„ç§è®¡ç®—æœºè§†è§‰ä»»åŠ¡çš„éœ€æ±‚ã€‚

ç»¼ä¸Šæ‰€è¿°ï¼ŒYOLOv8ç®—æ³•åœ¨åŸæœ‰YOLOç³»åˆ—çš„åŸºç¡€ä¸Šï¼Œé€šè¿‡å¼•å…¥æ–°çš„ç½‘ç»œç»“æ„ã€ä¼˜åŒ–ç‰¹å¾æå–å’Œèåˆç­–ç•¥ã€æ”¹è¿›æŸå¤±å‡½æ•°ç­‰å¤šæ–¹é¢çš„åˆ›æ–°ï¼Œæå‡äº†ç›®æ ‡æ£€æµ‹çš„ç²¾åº¦å’Œé€Ÿåº¦ã€‚å…¶ç‹¬ç‰¹çš„è®¾è®¡ä½¿å¾—YOLOv8åœ¨é¢å¯¹å¤æ‚çš„è§†è§‰ä»»åŠ¡æ—¶ï¼Œèƒ½å¤Ÿæœ‰æ•ˆåœ°æ•æ‰åˆ°ç›®æ ‡ç‰¹å¾ï¼Œå¿«é€Ÿè€Œå‡†ç¡®åœ°è¿›è¡Œç›®æ ‡æ£€æµ‹ã€‚è¿™äº›ä¼˜ç‚¹ä½¿å¾—YOLOv8æˆä¸ºå½“å‰ç›®æ ‡æ£€æµ‹é¢†åŸŸä¸­æœ€ä¸ºå…ˆè¿›çš„ç®—æ³•ä¹‹ä¸€ï¼Œå¹¿æ³›åº”ç”¨äºè‡ªåŠ¨é©¾é©¶ã€å®‰é˜²ç›‘æ§ã€æ™ºèƒ½åˆ¶é€ ç­‰å¤šä¸ªé¢†åŸŸï¼Œå±•ç°å‡ºå¹¿é˜”çš„åº”ç”¨å‰æ™¯ã€‚

![18.png](18.png)

### 11.é¡¹ç›®æ ¸å¿ƒæºç è®²è§£ï¼ˆå†ä¹Ÿä¸ç”¨æ‹…å¿ƒçœ‹ä¸æ‡‚ä»£ç é€»è¾‘ï¼‰

#### 11.1 code\ultralytics\trackers\bot_sort.py

ä»¥ä¸‹æ˜¯ç»è¿‡ç²¾ç®€å’Œæ³¨é‡Šçš„æ ¸å¿ƒä»£ç éƒ¨åˆ†ï¼Œä¿ç•™äº†æœ€é‡è¦çš„åŠŸèƒ½å’Œé€»è¾‘ï¼š

```python
# Ultralytics YOLO ğŸš€, AGPL-3.0 license

from collections import deque
import numpy as np
from .basetrack import TrackState
from .byte_tracker import BYTETracker
from .utils import matching
from .utils.gmc import GMC
from .utils.kalman_filter import KalmanFilterXYWH

class BOTrack:
    """
    BOTrackç±»ç”¨äºYOLOv8çš„å¯¹è±¡è·Ÿè¸ªï¼Œæ‰©å±•äº†STrackç±»ï¼Œå¢åŠ äº†ç‰¹å¾å¹³æ»‘å’Œå¡å°”æ›¼æ»¤æ³¢åŠŸèƒ½ã€‚
    """

    shared_kalman = KalmanFilterXYWH()  # å…±äº«çš„å¡å°”æ›¼æ»¤æ³¢å™¨å®ä¾‹

    def __init__(self, tlwh, score, cls, feat=None, feat_history=50):
        """åˆå§‹åŒ–BOTrackå®ä¾‹ï¼Œè®¾ç½®è¾¹ç•Œæ¡†ã€åˆ†æ•°ã€ç±»åˆ«å’Œç‰¹å¾å†å²é•¿åº¦ã€‚"""
        self.tlwh = tlwh  # è¾¹ç•Œæ¡†ä¿¡æ¯
        self.score = score  # ç½®ä¿¡åº¦åˆ†æ•°
        self.cls = cls  # ç±»åˆ«
        self.smooth_feat = None  # å¹³æ»‘ç‰¹å¾
        self.curr_feat = None  # å½“å‰ç‰¹å¾
        self.features = deque([], maxlen=feat_history)  # ç‰¹å¾å†å²
        self.alpha = 0.9  # å¹³æ»‘å› å­

        if feat is not None:
            self.update_features(feat)  # æ›´æ–°ç‰¹å¾

    def update_features(self, feat):
        """æ›´æ–°ç‰¹å¾å‘é‡å¹¶ä½¿ç”¨æŒ‡æ•°ç§»åŠ¨å¹³å‡è¿›è¡Œå¹³æ»‘å¤„ç†ã€‚"""
        feat /= np.linalg.norm(feat)  # å½’ä¸€åŒ–ç‰¹å¾
        self.curr_feat = feat  # å½“å‰ç‰¹å¾
        if self.smooth_feat is None:
            self.smooth_feat = feat  # åˆå§‹åŒ–å¹³æ»‘ç‰¹å¾
        else:
            # æ›´æ–°å¹³æ»‘ç‰¹å¾
            self.smooth_feat = self.alpha * self.smooth_feat + (1 - self.alpha) * feat
        self.features.append(feat)  # æ·»åŠ å½“å‰ç‰¹å¾åˆ°å†å²ç‰¹å¾
        self.smooth_feat /= np.linalg.norm(self.smooth_feat)  # å½’ä¸€åŒ–å¹³æ»‘ç‰¹å¾

    def predict(self):
        """ä½¿ç”¨å¡å°”æ›¼æ»¤æ³¢å™¨é¢„æµ‹çŠ¶æ€çš„å‡å€¼å’Œåæ–¹å·®ã€‚"""
        mean_state = self.mean.copy()  # å¤åˆ¶å½“å‰å‡å€¼çŠ¶æ€
        if self.state != TrackState.Tracked:
            mean_state[6] = 0  # çŠ¶æ€æœªè·Ÿè¸ªæ—¶ï¼Œé€Ÿåº¦è®¾ä¸º0
            mean_state[7] = 0

        # é¢„æµ‹å‡å€¼å’Œåæ–¹å·®
        self.mean, self.covariance = self.shared_kalman.predict(mean_state, self.covariance)

    @property
    def tlwh(self):
        """è·å–å½“å‰è¾¹ç•Œæ¡†ä½ç½®ï¼Œæ ¼å¼ä¸º (å·¦ä¸Šè§’x, å·¦ä¸Šè§’y, å®½åº¦, é«˜åº¦)ã€‚"""
        if self.mean is None:
            return self.tlwh.copy()  # è¿”å›åˆå§‹è¾¹ç•Œæ¡†
        ret = self.mean[:4].copy()  # å¤åˆ¶å‡å€¼çš„å‰å››ä¸ªå…ƒç´ 
        ret[:2] -= ret[2:] / 2  # è®¡ç®—å·¦ä¸Šè§’åæ ‡
        return ret

class BOTSORT(BYTETracker):
    """
    BOTSORTç±»ç”¨äºYOLOv8çš„å¯¹è±¡è·Ÿè¸ªï¼Œç»“åˆäº†ReIDå’ŒGMCç®—æ³•ã€‚
    """

    def __init__(self, args, frame_rate=30):
        """åˆå§‹åŒ–BOTSORTå®ä¾‹ï¼Œè®¾ç½®è·Ÿè¸ªå‚æ•°å’ŒGMCç®—æ³•ã€‚"""
        super().__init__(args, frame_rate)
        self.proximity_thresh = args.proximity_thresh  # ç©ºé—´æ¥è¿‘é˜ˆå€¼
        self.appearance_thresh = args.appearance_thresh  # å¤–è§‚ç›¸ä¼¼æ€§é˜ˆå€¼
        self.gmc = GMC(method=args.gmc_method)  # GMCå®ä¾‹

    def init_track(self, dets, scores, cls, img=None):
        """ä½¿ç”¨æ£€æµ‹ç»“æœåˆå§‹åŒ–è·Ÿè¸ªã€‚"""
        if len(dets) == 0:
            return []
        return [BOTrack(xyxy, s, c) for (xyxy, s, c) in zip(dets, scores, cls)]  # è¿”å›BOTrackå®ä¾‹åˆ—è¡¨

    def get_dists(self, tracks, detections):
        """è®¡ç®—è·Ÿè¸ªå’Œæ£€æµ‹ä¹‹é—´çš„è·ç¦»ã€‚"""
        dists = matching.iou_distance(tracks, detections)  # è®¡ç®—IoUè·ç¦»
        # è¿›ä¸€æ­¥å¤„ç†è·ç¦»
        return dists

    def multi_predict(self, tracks):
        """é¢„æµ‹å’Œè·Ÿè¸ªå¤šä¸ªå¯¹è±¡ã€‚"""
        BOTrack.shared_kalman.multi_predict(tracks)  # è°ƒç”¨å…±äº«å¡å°”æ›¼æ»¤æ³¢å™¨è¿›è¡Œé¢„æµ‹
```

### ä»£ç è¯´æ˜ï¼š
1. **BOTrackç±»**ï¼šç”¨äºå®ç°YOLOv8çš„å¯¹è±¡è·Ÿè¸ªï¼Œåˆ©ç”¨å¡å°”æ›¼æ»¤æ³¢å™¨è¿›è¡ŒçŠ¶æ€é¢„æµ‹ï¼Œå¹¶ä½¿ç”¨ç‰¹å¾å¹³æ»‘æŠ€æœ¯æé«˜è·Ÿè¸ªçš„ç¨³å®šæ€§ã€‚
   - `update_features`æ–¹æ³•ç”¨äºæ›´æ–°ç‰¹å¾å¹¶è¿›è¡Œå¹³æ»‘å¤„ç†ã€‚
   - `predict`æ–¹æ³•ä½¿ç”¨å¡å°”æ›¼æ»¤æ³¢å™¨é¢„æµ‹å¯¹è±¡çš„çŠ¶æ€ã€‚
   - `tlwh`å±æ€§ç”¨äºè·å–å½“å‰å¯¹è±¡çš„è¾¹ç•Œæ¡†ä¿¡æ¯ã€‚

2. **BOTSORTç±»**ï¼šç»§æ‰¿è‡ªBYTETrackerï¼Œä¸“é—¨ä¸ºYOLOv8è®¾è®¡ï¼Œç»“åˆäº†ReIDå’ŒGMCç®—æ³•ã€‚
   - `init_track`æ–¹æ³•ç”¨äºåˆå§‹åŒ–è·Ÿè¸ªå¯¹è±¡ã€‚
   - `get_dists`æ–¹æ³•è®¡ç®—è·Ÿè¸ªå’Œæ£€æµ‹ä¹‹é—´çš„è·ç¦»ï¼Œä½¿ç”¨IoUè¿›è¡Œè¯„ä¼°ã€‚

ä»¥ä¸Šä»£ç å®ç°äº†YOLOv8ä¸­çš„å¯¹è±¡è·Ÿè¸ªåŠŸèƒ½ï¼Œç»“åˆäº†ç‰¹å¾å¤„ç†å’Œå¡å°”æ›¼æ»¤æ³¢ï¼Œé€‚ç”¨äºåŠ¨æ€åœºæ™¯ä¸­çš„ç›®æ ‡æ£€æµ‹ä¸è·Ÿè¸ªã€‚

è¯¥æ–‡ä»¶å®ç°äº†ä¸€ä¸ªåŸºäºYOLOv8çš„å¯¹è±¡è·Ÿè¸ªç³»ç»Ÿï¼Œä¸»è¦åŒ…å«ä¸¤ä¸ªç±»ï¼š`BOTrack`å’Œ`BOTSORT`ã€‚`BOTrack`ç±»æ˜¯å¯¹YOLOv8ä¸­`STrack`ç±»çš„æ‰©å±•ï¼Œå¢åŠ äº†å¯¹è±¡è·Ÿè¸ªçš„åŠŸèƒ½ï¼Œè€Œ`BOTSORT`ç±»åˆ™æ˜¯å¯¹`BYTETracker`ç±»çš„æ‰©å±•ï¼Œæ—¨åœ¨ç»“åˆReIDï¼ˆé‡è¯†åˆ«ï¼‰å’ŒGMCï¼ˆå›¾å½¢åŒ¹é…ç®—æ³•ï¼‰è¿›è¡Œå¯¹è±¡è·Ÿè¸ªã€‚

åœ¨`BOTrack`ç±»ä¸­ï¼Œé¦–å…ˆå®šä¹‰äº†ä¸€äº›å±æ€§ï¼ŒåŒ…æ‹¬å…±äº«çš„å¡å°”æ›¼æ»¤æ³¢å™¨ã€å¹³æ»‘ç‰¹å¾å‘é‡ã€å½“å‰ç‰¹å¾å‘é‡ã€ç‰¹å¾å†å²è®°å½•ç­‰ã€‚è¯¥ç±»çš„æ„é€ å‡½æ•°åˆå§‹åŒ–äº†è¿™äº›å±æ€§ï¼Œå¹¶ä¸”åœ¨æä¾›ç‰¹å¾æ—¶ä¼šè°ƒç”¨`update_features`æ–¹æ³•æ¥æ›´æ–°å’Œå…‰æ»‘ç‰¹å¾å‘é‡ã€‚`update_features`æ–¹æ³•é€šè¿‡æŒ‡æ•°ç§»åŠ¨å¹³å‡æ¥å¹³æ»‘ç‰¹å¾ï¼Œå¹¶å°†å…¶å­˜å‚¨åœ¨ä¸€ä¸ªåŒç«¯é˜Ÿåˆ—ä¸­ã€‚

`predict`æ–¹æ³•ä½¿ç”¨å¡å°”æ›¼æ»¤æ³¢å™¨é¢„æµ‹å½“å‰å¯¹è±¡çš„çŠ¶æ€ï¼ŒåŒ…æ‹¬å‡å€¼å’Œåæ–¹å·®ã€‚å¦‚æœå¯¹è±¡çš„çŠ¶æ€ä¸æ˜¯â€œè¢«è·Ÿè¸ªâ€ï¼Œåˆ™å°†å‡å€¼çš„é€Ÿåº¦åˆ†é‡è®¾ä¸ºé›¶ã€‚`re_activate`å’Œ`update`æ–¹æ³•ç”¨äºé‡æ–°æ¿€æ´»å’Œæ›´æ–°è·Ÿè¸ªå¯¹è±¡çš„çŠ¶æ€ï¼Œå¹¶åœ¨æ­¤è¿‡ç¨‹ä¸­æ›´æ–°ç‰¹å¾ã€‚`tlwh`å±æ€§è¿”å›å½“å‰å¯¹è±¡çš„ä½ç½®ï¼Œä»¥å·¦ä¸Šè§’åæ ‡å’Œå®½é«˜çš„æ ¼å¼è¡¨ç¤ºã€‚`multi_predict`æ–¹æ³•åˆ™å¯ä»¥åŒæ—¶é¢„æµ‹å¤šä¸ªå¯¹è±¡çš„çŠ¶æ€ï¼Œåˆ©ç”¨å…±äº«çš„å¡å°”æ›¼æ»¤æ³¢å™¨æ¥æé«˜æ•ˆç‡ã€‚

`BOTSORT`ç±»åˆ™ä¸»è¦è´Ÿè´£åˆå§‹åŒ–è·Ÿè¸ªå™¨å¹¶å¤„ç†æ£€æµ‹åˆ°çš„å¯¹è±¡ã€‚æ„é€ å‡½æ•°ä¸­è®¾ç½®äº†ä¸ReIDç›¸å…³çš„é˜ˆå€¼ï¼Œå¹¶åˆå§‹åŒ–äº†GMCç®—æ³•çš„å®ä¾‹ã€‚`get_kalmanfilter`æ–¹æ³•è¿”å›ä¸€ä¸ªæ–°çš„å¡å°”æ›¼æ»¤æ³¢å™¨å®ä¾‹ã€‚`init_track`æ–¹æ³•ç”¨äºæ ¹æ®æ£€æµ‹ç»“æœã€åˆ†æ•°å’Œç±»åˆ«åˆå§‹åŒ–è·Ÿè¸ªå¯¹è±¡ã€‚å¦‚æœå¯ç”¨äº†ReIDæ¨¡å—ï¼Œåˆ™ä¼šä½¿ç”¨ç¼–ç å™¨æå–ç‰¹å¾ã€‚`get_dists`æ–¹æ³•è®¡ç®—è·Ÿè¸ªå¯¹è±¡ä¸æ£€æµ‹å¯¹è±¡ä¹‹é—´çš„è·ç¦»ï¼Œä½¿ç”¨IoUï¼ˆäº¤å¹¶æ¯”ï¼‰å’Œå¯é€‰çš„ReIDåµŒå…¥æ¥è¿›è¡ŒåŒ¹é…ã€‚æœ€åï¼Œ`multi_predict`æ–¹æ³•è°ƒç”¨`BOTrack`çš„`multi_predict`æ–¹æ³•æ¥å¤„ç†å¤šä¸ªå¯¹è±¡çš„é¢„æµ‹ã€‚

æ€»ä½“è€Œè¨€ï¼Œè¯¥æ–‡ä»¶å®ç°äº†ä¸€ä¸ªç»“åˆäº†å¡å°”æ›¼æ»¤æ³¢ã€ReIDå’ŒGMCç®—æ³•çš„é«˜æ•ˆå¯¹è±¡è·Ÿè¸ªç³»ç»Ÿï¼Œé€‚ç”¨äºYOLOv8æ¨¡å‹çš„åº”ç”¨åœºæ™¯ã€‚

#### 11.2 ui.py

```python
import sys
import subprocess

def run_script(script_path):
    """
    ä½¿ç”¨å½“å‰ Python ç¯å¢ƒè¿è¡ŒæŒ‡å®šçš„è„šæœ¬ã€‚

    Args:
        script_path (str): è¦è¿è¡Œçš„è„šæœ¬è·¯å¾„

    Returns:
        None
    """
    # è·å–å½“å‰ Python è§£é‡Šå™¨çš„è·¯å¾„
    python_path = sys.executable

    # æ„å»ºè¿è¡Œå‘½ä»¤
    command = f'"{python_path}" -m streamlit run "{script_path}"'

    # æ‰§è¡Œå‘½ä»¤
    result = subprocess.run(command, shell=True)
    if result.returncode != 0:
        print("è„šæœ¬è¿è¡Œå‡ºé”™ã€‚")


# å®ä¾‹åŒ–å¹¶è¿è¡Œåº”ç”¨
if __name__ == "__main__":
    # æŒ‡å®šæ‚¨çš„è„šæœ¬è·¯å¾„
    script_path = "web.py"  # è¿™é‡Œå¯ä»¥ç›´æ¥æŒ‡å®šè„šæœ¬åç§°

    # è¿è¡Œè„šæœ¬
    run_script(script_path)
```

### ä»£ç æ³¨é‡Šè¯´æ˜ï¼š

1. **å¯¼å…¥æ¨¡å—**ï¼š
   - `import sys`ï¼šå¯¼å…¥ sys æ¨¡å—ï¼Œä»¥ä¾¿è·å–å½“å‰ Python è§£é‡Šå™¨çš„è·¯å¾„ã€‚
   - `import subprocess`ï¼šå¯¼å…¥ subprocess æ¨¡å—ï¼Œç”¨äºåœ¨ Python ä¸­æ‰§è¡Œå¤–éƒ¨å‘½ä»¤ã€‚

2. **å®šä¹‰å‡½æ•° `run_script`**ï¼š
   - è¯¥å‡½æ•°æ¥å—ä¸€ä¸ªå‚æ•° `script_path`ï¼Œè¡¨ç¤ºè¦è¿è¡Œçš„ Python è„šæœ¬çš„è·¯å¾„ã€‚
   - å‡½æ•°å†…éƒ¨é¦–å…ˆè·å–å½“å‰ Python è§£é‡Šå™¨çš„è·¯å¾„ï¼Œå­˜å‚¨åœ¨ `python_path` å˜é‡ä¸­ã€‚
   - ç„¶åæ„å»ºä¸€ä¸ªå‘½ä»¤å­—ç¬¦ä¸² `command`ï¼Œè¯¥å‘½ä»¤ç”¨äºè¿è¡ŒæŒ‡å®šçš„è„šæœ¬ï¼Œä½¿ç”¨ `streamlit` æ¨¡å—ã€‚
   - ä½¿ç”¨ `subprocess.run` æ–¹æ³•æ‰§è¡Œå‘½ä»¤ã€‚å¦‚æœè¿”å›ç ä¸ä¸º 0ï¼Œè¡¨ç¤ºè„šæœ¬è¿è¡Œå‡ºé”™ï¼Œæ‰“å°é”™è¯¯ä¿¡æ¯ã€‚

3. **ä¸»ç¨‹åºå…¥å£**ï¼š
   - `if __name__ == "__main__":`ï¼šç¡®ä¿è¯¥ä»£ç å—ä»…åœ¨è„šæœ¬ä½œä¸ºä¸»ç¨‹åºè¿è¡Œæ—¶æ‰§è¡Œã€‚
   - æŒ‡å®šè¦è¿è¡Œçš„è„šæœ¬è·¯å¾„ä¸º `web.py`ã€‚
   - è°ƒç”¨ `run_script` å‡½æ•°ï¼Œä¼ å…¥è„šæœ¬è·¯å¾„ä»¥æ‰§è¡Œè¯¥è„šæœ¬ã€‚

è¿™ä¸ªç¨‹åºæ–‡ä»¶åä¸º `ui.py`ï¼Œå…¶ä¸»è¦åŠŸèƒ½æ˜¯ä½¿ç”¨å½“å‰çš„ Python ç¯å¢ƒæ¥è¿è¡Œä¸€ä¸ªæŒ‡å®šçš„è„šæœ¬ï¼Œå…·ä½“æ˜¯ä¸€ä¸ªåä¸º `web.py` çš„æ–‡ä»¶ã€‚ç¨‹åºé¦–å…ˆå¯¼å…¥äº†å¿…è¦çš„æ¨¡å—ï¼ŒåŒ…æ‹¬ `sys`ã€`os` å’Œ `subprocess`ï¼Œè¿™äº›æ¨¡å—æä¾›äº†ä¸ç³»ç»Ÿäº¤äº’çš„åŠŸèƒ½ã€‚

åœ¨ `run_script` å‡½æ•°ä¸­ï¼Œé¦–å…ˆå®šä¹‰äº†ä¸€ä¸ªå‚æ•° `script_path`ï¼Œç”¨äºæ¥æ”¶è¦è¿è¡Œçš„è„šæœ¬çš„è·¯å¾„ã€‚å‡½æ•°å†…éƒ¨é€šè¿‡ `sys.executable` è·å–å½“å‰ Python è§£é‡Šå™¨çš„è·¯å¾„ï¼Œè¿™æ ·å¯ä»¥ç¡®ä¿ä½¿ç”¨çš„æ˜¯å½“å‰ç¯å¢ƒçš„ Python ç‰ˆæœ¬ã€‚æ¥ç€ï¼Œæ„å»ºäº†ä¸€ä¸ªå‘½ä»¤å­—ç¬¦ä¸²ï¼Œå‘½ä»¤ä¸­ä½¿ç”¨äº† `streamlit` è¿™ä¸ªåº“æ¥è¿è¡ŒæŒ‡å®šçš„è„šæœ¬ã€‚è¿™é‡Œçš„å‘½ä»¤æ ¼å¼ä¸º `"{python_path}" -m streamlit run "{script_path}"`ï¼Œå…¶ä¸­ `{python_path}` å’Œ `{script_path}` åˆ†åˆ«è¢«æ›¿æ¢ä¸ºå®é™…çš„ Python è§£é‡Šå™¨è·¯å¾„å’Œè„šæœ¬è·¯å¾„ã€‚

ç„¶åï¼Œä½¿ç”¨ `subprocess.run` æ–¹æ³•æ‰§è¡Œæ„å»ºå¥½çš„å‘½ä»¤ï¼Œ`shell=True` å‚æ•°å…è®¸åœ¨ shell ä¸­æ‰§è¡Œè¯¥å‘½ä»¤ã€‚æ‰§è¡Œåï¼Œç¨‹åºä¼šæ£€æŸ¥è¿”å›çš„ç»“æœç ï¼Œå¦‚æœç»“æœç ä¸ä¸º 0ï¼Œè¡¨ç¤ºè„šæœ¬è¿è¡Œè¿‡ç¨‹ä¸­å‡ºç°äº†é”™è¯¯ï¼Œæ­¤æ—¶ä¼šæ‰“å°å‡ºâ€œè„šæœ¬è¿è¡Œå‡ºé”™ã€‚â€çš„æç¤ºä¿¡æ¯ã€‚

åœ¨æ–‡ä»¶çš„æœ€åéƒ¨åˆ†ï¼Œä½¿ç”¨ `if __name__ == "__main__":` æ¥åˆ¤æ–­å½“å‰æ¨¡å—æ˜¯å¦æ˜¯ä¸»ç¨‹åºï¼Œå¦‚æœæ˜¯ï¼Œåˆ™ä¼šæŒ‡å®šè¦è¿è¡Œçš„è„šæœ¬è·¯å¾„ä¸º `web.py`ï¼Œå¹¶è°ƒç”¨ `run_script` å‡½æ•°æ¥æ‰§è¡Œè¿™ä¸ªè„šæœ¬ã€‚è¿™é‡Œçš„ `abs_path` å‡½æ•°ç”¨äºè·å– `web.py` çš„ç»å¯¹è·¯å¾„ï¼Œç¡®ä¿åœ¨ä»»ä½•å·¥ä½œç›®å½•ä¸‹éƒ½èƒ½æ­£ç¡®æ‰¾åˆ°è¯¥è„šæœ¬ã€‚

æ€»çš„æ¥è¯´ï¼Œè¿™ä¸ªç¨‹åºçš„æ ¸å¿ƒåŠŸèƒ½æ˜¯æ–¹ä¾¿åœ°åœ¨å½“å‰ Python ç¯å¢ƒä¸­è¿è¡Œä¸€ä¸ª Streamlit åº”ç”¨è„šæœ¬ï¼Œå¹¶å¤„ç†å¯èƒ½å‡ºç°çš„é”™è¯¯ã€‚

#### 11.3 70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰\ultralytics\utils\errors.py

```python
# å¯¼å…¥ultralytics.utilsæ¨¡å—ä¸­çš„emojiså‡½æ•°ï¼Œç”¨äºå¤„ç†å¸¦æœ‰è¡¨æƒ…ç¬¦å·çš„æ¶ˆæ¯
from ultralytics.utils import emojis

# è‡ªå®šä¹‰å¼‚å¸¸ç±»ï¼Œç”¨äºå¤„ç†ä¸Ultralytics YOLOæ¨¡å‹è·å–ç›¸å…³çš„é”™è¯¯
class HUBModelError(Exception):
    """
    è‡ªå®šä¹‰å¼‚å¸¸ç±»ï¼Œç”¨äºå¤„ç†ä¸æ¨¡å‹è·å–ç›¸å…³çš„é”™è¯¯ã€‚

    å½“è¯·æ±‚çš„æ¨¡å‹æœªæ‰¾åˆ°æˆ–æ— æ³•æ£€ç´¢æ—¶ï¼Œå°†å¼•å‘æ­¤å¼‚å¸¸ã€‚
    æ¶ˆæ¯ç»è¿‡å¤„ç†ï¼Œä»¥åŒ…å«è¡¨æƒ…ç¬¦å·ï¼Œä»è€Œæå‡ç”¨æˆ·ä½“éªŒã€‚

    å±æ€§:
        message (str): å½“å¼‚å¸¸è¢«å¼•å‘æ—¶æ˜¾ç¤ºçš„é”™è¯¯æ¶ˆæ¯ã€‚

    æ³¨æ„:
        æ¶ˆæ¯ä¼šé€šè¿‡'ultralytics.utils'åŒ…ä¸­çš„'emojis'å‡½æ•°è‡ªåŠ¨å¤„ç†ã€‚
    """

    def __init__(self, message='Model not found. Please check model URL and try again.'):
        """åˆ›å»ºä¸€ä¸ªæ¨¡å‹æœªæ‰¾åˆ°çš„å¼‚å¸¸ã€‚"""
        # è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼Œå¹¶ä½¿ç”¨emojiså‡½æ•°å¤„ç†æ¶ˆæ¯
        super().__init__(emojis(message))
``` 

### ä»£ç æ ¸å¿ƒéƒ¨åˆ†åŠæ³¨é‡Šè¯´æ˜ï¼š
1. **å¯¼å…¥æ¨¡å—**ï¼šå¼•å…¥`emojis`å‡½æ•°ï¼Œç”¨äºåœ¨å¼‚å¸¸æ¶ˆæ¯ä¸­æ·»åŠ è¡¨æƒ…ç¬¦å·ï¼Œå¢å¼ºç”¨æˆ·ä½“éªŒã€‚
2. **è‡ªå®šä¹‰å¼‚å¸¸ç±»**ï¼š`HUBModelError`ç±»ç»§æ‰¿è‡ª`Exception`ï¼Œç”¨äºä¸“é—¨å¤„ç†æ¨¡å‹è·å–å¤±è´¥çš„æƒ…å†µã€‚
3. **æ„é€ å‡½æ•°**ï¼š`__init__`æ–¹æ³•æ¥å—ä¸€ä¸ªå¯é€‰çš„æ¶ˆæ¯å‚æ•°ï¼Œé»˜è®¤æ¶ˆæ¯æŒ‡ç¤ºæ¨¡å‹æœªæ‰¾åˆ°ï¼Œå¹¶è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°æ¥åˆå§‹åŒ–å¼‚å¸¸ï¼ŒåŒæ—¶ä½¿ç”¨`emojis`å‡½æ•°å¤„ç†æ¶ˆæ¯ã€‚

è¿™ä¸ªç¨‹åºæ–‡ä»¶æ˜¯Ultralytics YOLOæ¡†æ¶ä¸­çš„ä¸€ä¸ªé”™è¯¯å¤„ç†æ¨¡å—ï¼Œä¸»è¦ç”¨äºå®šä¹‰ä¸€ä¸ªè‡ªå®šä¹‰å¼‚å¸¸ç±»`HUBModelError`ã€‚è¯¥ç±»ä¸“é—¨å¤„ç†ä¸æ¨¡å‹è·å–ç›¸å…³çš„é”™è¯¯ï¼Œæ¯”å¦‚å½“è¯·æ±‚çš„æ¨¡å‹æœªæ‰¾åˆ°æˆ–æ— æ³•è¢«æ£€ç´¢æ—¶ï¼Œå°±ä¼šæŠ›å‡ºè¿™ä¸ªå¼‚å¸¸ã€‚

åœ¨ç±»çš„æ–‡æ¡£å­—ç¬¦ä¸²ä¸­ï¼Œè¯¦ç»†è¯´æ˜äº†è¿™ä¸ªå¼‚å¸¸çš„ç”¨é€”å’ŒåŠŸèƒ½ã€‚`HUBModelError`ç±»ç»§æ‰¿è‡ªPythonçš„å†…ç½®`Exception`ç±»ï¼Œå…è®¸ç”¨æˆ·åœ¨å‘ç”Ÿç‰¹å®šé”™è¯¯æ—¶æŠ›å‡ºè¿™ä¸ªå¼‚å¸¸ã€‚å®ƒçš„æ„é€ å‡½æ•°æ¥å—ä¸€ä¸ªå¯é€‰çš„å‚æ•°`message`ï¼Œé»˜è®¤ä¿¡æ¯ä¸ºâ€œæ¨¡å‹æœªæ‰¾åˆ°ã€‚è¯·æ£€æŸ¥æ¨¡å‹URLå¹¶é‡è¯•ã€‚â€å½“è¿™ä¸ªå¼‚å¸¸è¢«æŠ›å‡ºæ—¶ï¼Œç”¨æˆ·å°†çœ‹åˆ°è¿™ä¸ªä¿¡æ¯ã€‚

å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œä¼ å…¥çš„é”™è¯¯ä¿¡æ¯ä¼šé€šè¿‡`ultralytics.utils`åŒ…ä¸­çš„`emojis`å‡½æ•°è¿›è¡Œå¤„ç†ï¼Œè¿™æ„å‘³ç€åœ¨æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯æ—¶ï¼Œå¯èƒ½ä¼šåŒ…å«ä¸€äº›è¡¨æƒ…ç¬¦å·ï¼Œä»¥å¢å¼ºç”¨æˆ·ä½“éªŒã€‚è¿™ç§è®¾è®¡ä½¿å¾—é”™è¯¯ä¿¡æ¯æ›´åŠ å‹å¥½å’Œæ˜“äºç†è§£ã€‚

æ€»çš„æ¥è¯´ï¼Œè¿™ä¸ªæ–‡ä»¶çš„ä¸»è¦åŠŸèƒ½æ˜¯æä¾›ä¸€ä¸ªæ¸…æ™°ä¸”ç”¨æˆ·å‹å¥½çš„æ–¹å¼æ¥å¤„ç†æ¨¡å‹è·å–è¿‡ç¨‹ä¸­å¯èƒ½å‡ºç°çš„é”™è¯¯ï¼Œä»è€Œæå‡å¼€å‘è€…åœ¨ä½¿ç”¨YOLOæ¡†æ¶æ—¶çš„ä½“éªŒã€‚

#### 11.4 train.py

ä»¥ä¸‹æ˜¯ä»£ç ä¸­æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ï¼Œå¹¶é™„ä¸Šè¯¦ç»†çš„ä¸­æ–‡æ³¨é‡Šï¼š

```python
class DetectionTrainer(BaseTrainer):
    """
    DetectionTrainerç±»ç”¨äºåŸºäºæ£€æµ‹æ¨¡å‹è¿›è¡Œè®­ç»ƒï¼Œç»§æ‰¿è‡ªBaseTrainerç±»ã€‚
    """

    def build_dataset(self, img_path, mode="train", batch=None):
        """
        æ„å»ºYOLOæ•°æ®é›†ã€‚

        å‚æ•°:
            img_path (str): åŒ…å«å›¾åƒçš„æ–‡ä»¶å¤¹è·¯å¾„ã€‚
            mode (str): æ¨¡å¼ï¼Œå¯ä»¥æ˜¯'train'æˆ–'val'ï¼Œç”¨æˆ·å¯ä»¥ä¸ºæ¯ç§æ¨¡å¼è‡ªå®šä¹‰ä¸åŒçš„å¢å¼ºã€‚
            batch (int, optional): æ‰¹æ¬¡å¤§å°ï¼Œä»…ç”¨äº'rect'æ¨¡å¼ã€‚é»˜è®¤ä¸ºNoneã€‚
        """
        gs = max(int(de_parallel(self.model).stride.max() if self.model else 0), 32)
        return build_yolo_dataset(self.args, img_path, batch, self.data, mode=mode, rect=mode == "val", stride=gs)

    def get_dataloader(self, dataset_path, batch_size=16, rank=0, mode="train"):
        """æ„é€ å¹¶è¿”å›æ•°æ®åŠ è½½å™¨ã€‚"""
        assert mode in ["train", "val"]  # ç¡®ä¿æ¨¡å¼æ˜¯'train'æˆ–'val'
        with torch_distributed_zero_first(rank):  # ä»…åœ¨DDPä¸­åˆå§‹åŒ–æ•°æ®é›†*.cacheä¸€æ¬¡
            dataset = self.build_dataset(dataset_path, mode, batch_size)  # æ„å»ºæ•°æ®é›†
        shuffle = mode == "train"  # è®­ç»ƒæ¨¡å¼ä¸‹æ‰“ä¹±æ•°æ®
        if getattr(dataset, "rect", False) and shuffle:
            LOGGER.warning("WARNING âš ï¸ 'rect=True'ä¸DataLoaderçš„shuffleä¸å…¼å®¹ï¼Œè®¾ç½®shuffle=False")
            shuffle = False
        workers = self.args.workers if mode == "train" else self.args.workers * 2  # è®¾ç½®å·¥ä½œçº¿ç¨‹æ•°
        return build_dataloader(dataset, batch_size, workers, shuffle, rank)  # è¿”å›æ•°æ®åŠ è½½å™¨

    def preprocess_batch(self, batch):
        """å¯¹ä¸€æ‰¹å›¾åƒè¿›è¡Œé¢„å¤„ç†ï¼ŒåŒ…æ‹¬ç¼©æ”¾å’Œè½¬æ¢ä¸ºæµ®ç‚¹æ•°ã€‚"""
        batch["img"] = batch["img"].to(self.device, non_blocking=True).float() / 255  # å°†å›¾åƒè½¬æ¢ä¸ºæµ®ç‚¹æ•°å¹¶å½’ä¸€åŒ–
        if self.args.multi_scale:  # å¦‚æœå¯ç”¨å¤šå°ºåº¦
            imgs = batch["img"]
            sz = (
                random.randrange(self.args.imgsz * 0.5, self.args.imgsz * 1.5 + self.stride)
                // self.stride
                * self.stride
            )  # éšæœºé€‰æ‹©æ–°çš„å°ºå¯¸
            sf = sz / max(imgs.shape[2:])  # è®¡ç®—ç¼©æ”¾å› å­
            if sf != 1:  # å¦‚æœç¼©æ”¾å› å­ä¸ä¸º1
                ns = [
                    math.ceil(x * sf / self.stride) * self.stride for x in imgs.shape[2:]
                ]  # è®¡ç®—æ–°çš„å½¢çŠ¶
                imgs = nn.functional.interpolate(imgs, size=ns, mode="bilinear", align_corners=False)  # è¿›è¡Œæ’å€¼
            batch["img"] = imgs  # æ›´æ–°æ‰¹æ¬¡å›¾åƒ
        return batch

    def set_model_attributes(self):
        """è®¾ç½®æ¨¡å‹çš„å±æ€§ï¼ŒåŒ…æ‹¬ç±»åˆ«æ•°é‡å’Œåç§°ã€‚"""
        self.model.nc = self.data["nc"]  # å°†ç±»åˆ«æ•°é‡é™„åŠ åˆ°æ¨¡å‹
        self.model.names = self.data["names"]  # å°†ç±»åˆ«åç§°é™„åŠ åˆ°æ¨¡å‹
        self.model.args = self.args  # å°†è¶…å‚æ•°é™„åŠ åˆ°æ¨¡å‹

    def get_model(self, cfg=None, weights=None, verbose=True):
        """è¿”å›YOLOæ£€æµ‹æ¨¡å‹ã€‚"""
        model = DetectionModel(cfg, nc=self.data["nc"], verbose=verbose and RANK == -1)  # åˆ›å»ºæ£€æµ‹æ¨¡å‹
        if weights:
            model.load(weights)  # åŠ è½½æƒé‡
        return model

    def get_validator(self):
        """è¿”å›YOLOæ¨¡å‹éªŒè¯å™¨ã€‚"""
        self.loss_names = "box_loss", "cls_loss", "dfl_loss"  # å®šä¹‰æŸå¤±åç§°
        return yolo.detect.DetectionValidator(
            self.test_loader, save_dir=self.save_dir, args=copy(self.args), _callbacks=self.callbacks
        )

    def label_loss_items(self, loss_items=None, prefix="train"):
        """
        è¿”å›å¸¦æ ‡ç­¾çš„è®­ç»ƒæŸå¤±é¡¹å­—å…¸ã€‚

        å¯¹äºåˆ†ç±»ä¸éœ€è¦ï¼Œä½†å¯¹äºåˆ†å‰²å’Œæ£€æµ‹æ˜¯å¿…è¦çš„ã€‚
        """
        keys = [f"{prefix}/{x}" for x in self.loss_names]  # åˆ›å»ºæŸå¤±é¡¹çš„é”®
        if loss_items is not None:
            loss_items = [round(float(x), 5) for x in loss_items]  # å°†å¼ é‡è½¬æ¢ä¸ºä¿ç•™5ä½å°æ•°çš„æµ®ç‚¹æ•°
            return dict(zip(keys, loss_items))  # è¿”å›æŸå¤±é¡¹å­—å…¸
        else:
            return keys  # è¿”å›é”®åˆ—è¡¨

    def progress_string(self):
        """è¿”å›æ ¼å¼åŒ–çš„è®­ç»ƒè¿›åº¦å­—ç¬¦ä¸²ï¼ŒåŒ…æ‹¬epochã€GPUå†…å­˜ã€æŸå¤±ã€å®ä¾‹å’Œå¤§å°ã€‚"""
        return ("\n" + "%11s" * (4 + len(self.loss_names))) % (
            "Epoch",
            "GPU_mem",
            *self.loss_names,
            "Instances",
            "Size",
        )

    def plot_training_samples(self, batch, ni):
        """ç»˜åˆ¶å¸¦æœ‰æ³¨é‡Šçš„è®­ç»ƒæ ·æœ¬ã€‚"""
        plot_images(
            images=batch["img"],
            batch_idx=batch["batch_idx"],
            cls=batch["cls"].squeeze(-1),
            bboxes=batch["bboxes"],
            paths=batch["im_file"],
            fname=self.save_dir / f"train_batch{ni}.jpg",
            on_plot=self.on_plot,
        )

    def plot_metrics(self):
        """ä»CSVæ–‡ä»¶ä¸­ç»˜åˆ¶æŒ‡æ ‡ã€‚"""
        plot_results(file=self.csv, on_plot=self.on_plot)  # ä¿å­˜ç»“æœå›¾åƒ

    def plot_training_labels(self):
        """åˆ›å»ºYOLOæ¨¡å‹çš„æ ‡è®°è®­ç»ƒå›¾ã€‚"""
        boxes = np.concatenate([lb["bboxes"] for lb in self.train_loader.dataset.labels], 0)  # åˆå¹¶æ‰€æœ‰è¾¹ç•Œæ¡†
        cls = np.concatenate([lb["cls"] for lb in self.train_loader.dataset.labels], 0)  # åˆå¹¶æ‰€æœ‰ç±»åˆ«
        plot_labels(boxes, cls.squeeze(), names=self.data["names"], save_dir=self.save_dir, on_plot=self.on_plot)  # ç»˜åˆ¶æ ‡ç­¾
```

ä»¥ä¸Šä»£ç ä¸»è¦å®ç°äº†YOLOæ£€æµ‹æ¨¡å‹çš„è®­ç»ƒè¿‡ç¨‹ï¼ŒåŒ…æ‹¬æ•°æ®é›†çš„æ„å»ºã€æ•°æ®åŠ è½½å™¨çš„åˆ›å»ºã€å›¾åƒçš„é¢„å¤„ç†ã€æ¨¡å‹å±æ€§çš„è®¾ç½®ã€æ¨¡å‹çš„è·å–ã€æŸå¤±çš„è®¡ç®—å’Œå¯è§†åŒ–ç­‰åŠŸèƒ½ã€‚æ¯ä¸ªæ–¹æ³•éƒ½æœ‰è¯¦ç»†çš„ä¸­æ–‡æ³¨é‡Šï¼Œå¸®åŠ©ç†è§£å…¶åŠŸèƒ½å’Œå®ç°ç»†èŠ‚ã€‚

è¿™ä¸ªç¨‹åºæ–‡ä»¶ `train.py` æ˜¯ä¸€ä¸ªç”¨äºè®­ç»ƒ YOLOï¼ˆYou Only Look Onceï¼‰ç›®æ ‡æ£€æµ‹æ¨¡å‹çš„ Python è„šæœ¬ï¼Œç»§æ‰¿è‡ª `BaseTrainer` ç±»ã€‚è¯¥æ–‡ä»¶åŒ…å«å¤šä¸ªæ–¹æ³•ï¼Œä¸»è¦ç”¨äºæ„å»ºæ•°æ®é›†ã€åŠ è½½æ•°æ®ã€é¢„å¤„ç†å›¾åƒã€è®¾ç½®æ¨¡å‹å±æ€§ã€è·å–æ¨¡å‹ã€éªŒè¯æ¨¡å‹ã€è®°å½•æŸå¤±ã€ç»˜åˆ¶è®­ç»ƒæ ·æœ¬å’Œç»˜åˆ¶è®­ç»ƒæŒ‡æ ‡ç­‰ã€‚

é¦–å…ˆï¼Œ`DetectionTrainer` ç±»çš„æ„é€ å‡½æ•°é€šè¿‡ä¼ å…¥çš„å‚æ•°åˆå§‹åŒ–è®­ç»ƒå™¨ï¼Œå¹¶æä¾›äº†ä¸€ä¸ªç¤ºä¾‹ç”¨æ³•ï¼Œå±•ç¤ºå¦‚ä½•åˆ›å»ºä¸€ä¸ªè®­ç»ƒå™¨å®ä¾‹å¹¶å¼€å§‹è®­ç»ƒã€‚ç±»ä¸­çš„ `build_dataset` æ–¹æ³•ç”¨äºæ„å»º YOLO æ•°æ®é›†ï¼Œæ¥æ”¶å›¾åƒè·¯å¾„ã€æ¨¡å¼ï¼ˆè®­ç»ƒæˆ–éªŒè¯ï¼‰å’Œæ‰¹æ¬¡å¤§å°ä½œä¸ºå‚æ•°ã€‚å®ƒä¼šæ ¹æ®æ¨¡å‹çš„æ­¥å¹…è®¡ç®—å‡ºåˆé€‚çš„å¤§å°ï¼Œå¹¶è°ƒç”¨ `build_yolo_dataset` å‡½æ•°æ¥åˆ›å»ºæ•°æ®é›†ã€‚

`get_dataloader` æ–¹æ³•åˆ™è´Ÿè´£æ„å»ºå’Œè¿”å›æ•°æ®åŠ è½½å™¨ï¼Œç¡®ä¿åœ¨åˆ†å¸ƒå¼è®­ç»ƒä¸­åªåˆå§‹åŒ–ä¸€æ¬¡æ•°æ®é›†ï¼Œå¹¶æ ¹æ®æ¨¡å¼è®¾ç½®æ˜¯å¦æ‰“ä¹±æ•°æ®ã€‚è¯¥æ–¹æ³•è¿˜ä¼šæ ¹æ®æ¨¡å¼é€‰æ‹©åˆé€‚çš„å·¥ä½œçº¿ç¨‹æ•°ã€‚

åœ¨ `preprocess_batch` æ–¹æ³•ä¸­ï¼Œç¨‹åºå¯¹å›¾åƒæ‰¹æ¬¡è¿›è¡Œé¢„å¤„ç†ï¼ŒåŒ…æ‹¬å°†å›¾åƒç¼©æ”¾åˆ°é€‚å½“çš„å¤§å°å¹¶è½¬æ¢ä¸ºæµ®ç‚¹æ•°æ ¼å¼ã€‚å®ƒè¿˜æ”¯æŒå¤šå°ºåº¦è®­ç»ƒï¼Œé€šè¿‡éšæœºé€‰æ‹©å›¾åƒå¤§å°æ¥å¢å¼ºæ¨¡å‹çš„é²æ£’æ€§ã€‚

`set_model_attributes` æ–¹æ³•ç”¨äºè®¾ç½®æ¨¡å‹çš„å±æ€§ï¼ŒåŒ…æ‹¬ç±»åˆ«æ•°é‡å’Œç±»åˆ«åç§°ã€‚`get_model` æ–¹æ³•åˆ™è¿”å›ä¸€ä¸ª YOLO æ£€æµ‹æ¨¡å‹ï¼Œå¹¶å¯é€‰æ‹©åŠ è½½é¢„è®­ç»ƒæƒé‡ã€‚

`get_validator` æ–¹æ³•è¿”å›ä¸€ä¸ªç”¨äºéªŒè¯æ¨¡å‹çš„ `DetectionValidator` å®ä¾‹ï¼Œè´Ÿè´£è®¡ç®—æŸå¤±å¹¶è¯„ä¼°æ¨¡å‹æ€§èƒ½ã€‚`label_loss_items` æ–¹æ³•ç”¨äºè¿”å›å¸¦æ ‡ç­¾çš„è®­ç»ƒæŸå¤±å­—å…¸ï¼Œä¾¿äºåç»­çš„ç›‘æ§å’Œåˆ†æã€‚

`progress_string` æ–¹æ³•è¿”å›ä¸€ä¸ªæ ¼å¼åŒ–çš„å­—ç¬¦ä¸²ï¼Œæ˜¾ç¤ºè®­ç»ƒè¿›åº¦ï¼ŒåŒ…æ‹¬å½“å‰çš„ epochã€GPU å†…å­˜ä½¿ç”¨æƒ…å†µã€æŸå¤±å€¼ã€å®ä¾‹æ•°é‡å’Œå›¾åƒå¤§å°ç­‰ä¿¡æ¯ã€‚

`plot_training_samples` æ–¹æ³•ç”¨äºç»˜åˆ¶è®­ç»ƒæ ·æœ¬åŠå…¶æ ‡æ³¨ï¼Œä¾¿äºå¯è§†åŒ–è®­ç»ƒè¿‡ç¨‹ä¸­çš„æ ·æœ¬æƒ…å†µã€‚æœ€åï¼Œ`plot_metrics` å’Œ `plot_training_labels` æ–¹æ³•åˆ†åˆ«ç”¨äºç»˜åˆ¶è®­ç»ƒè¿‡ç¨‹ä¸­çš„æŒ‡æ ‡å’Œæ ‡ç­¾ï¼Œå¸®åŠ©ç”¨æˆ·åˆ†ææ¨¡å‹çš„è®­ç»ƒæ•ˆæœã€‚

æ•´ä½“æ¥çœ‹ï¼Œè¿™ä¸ªæ–‡ä»¶æä¾›äº†ä¸€ä¸ªå®Œæ•´çš„æ¡†æ¶ï¼Œç”¨äºè®­ç»ƒ YOLO æ¨¡å‹ï¼Œæ¶µç›–äº†æ•°æ®å¤„ç†ã€æ¨¡å‹è®­ç»ƒã€éªŒè¯å’Œç»“æœå¯è§†åŒ–ç­‰å¤šä¸ªæ–¹é¢ï¼Œä¾¿äºç”¨æˆ·è¿›è¡Œç›®æ ‡æ£€æµ‹ä»»åŠ¡çš„å®ç°å’Œä¼˜åŒ–ã€‚

#### 11.5 70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰\ultralytics\utils\tal.py

ä»¥ä¸‹æ˜¯ä»£ç ä¸­æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ï¼Œå¹¶é™„ä¸Šè¯¦ç»†çš„ä¸­æ–‡æ³¨é‡Šï¼š

```python
import torch
import torch.nn as nn

def select_candidates_in_gts(xy_centers, gt_bboxes, eps=1e-9):
    """
    é€‰æ‹©åœ¨çœŸå®æ¡†ï¼ˆgtï¼‰ä¸­çš„æ­£é”šç‚¹ä¸­å¿ƒã€‚

    å‚æ•°:
        xy_centers (Tensor): å½¢çŠ¶ä¸º(h*w, 2)çš„å¼ é‡ï¼Œè¡¨ç¤ºé”šç‚¹çš„ä¸­å¿ƒåæ ‡ã€‚
        gt_bboxes (Tensor): å½¢çŠ¶ä¸º(b, n_boxes, 4)çš„å¼ é‡ï¼Œè¡¨ç¤ºçœŸå®æ¡†çš„åæ ‡ã€‚

    è¿”å›:
        (Tensor): å½¢çŠ¶ä¸º(b, n_boxes, h*w)çš„å¼ é‡ï¼Œè¡¨ç¤ºæ¯ä¸ªçœŸå®æ¡†ä¸­é”šç‚¹çš„é€‰æ‹©æƒ…å†µã€‚
    """
    n_anchors = xy_centers.shape[0]  # é”šç‚¹æ•°é‡
    bs, n_boxes, _ = gt_bboxes.shape  # æ‰¹æ¬¡å¤§å°å’ŒçœŸå®æ¡†æ•°é‡
    lt, rb = gt_bboxes.view(-1, 1, 4).chunk(2, 2)  # åˆ†åˆ«è·å–çœŸå®æ¡†çš„å·¦ä¸Šè§’å’Œå³ä¸‹è§’åæ ‡
    bbox_deltas = torch.cat((xy_centers[None] - lt, rb - xy_centers[None]), dim=2).view(bs, n_boxes, n_anchors, -1)
    return bbox_deltas.amin(3).gt_(eps)  # è¿”å›æ¯ä¸ªé”šç‚¹æ˜¯å¦åœ¨çœŸå®æ¡†å†…çš„å¸ƒå°”å€¼

class TaskAlignedAssigner(nn.Module):
    """
    ä»»åŠ¡å¯¹é½åˆ†é…å™¨ï¼Œç”¨äºç›®æ ‡æ£€æµ‹ã€‚

    è¯¥ç±»æ ¹æ®ä»»åŠ¡å¯¹é½æŒ‡æ ‡å°†çœŸå®å¯¹è±¡åˆ†é…ç»™é”šç‚¹ï¼Œè¯¥æŒ‡æ ‡ç»“åˆäº†åˆ†ç±»å’Œå®šä½ä¿¡æ¯ã€‚

    å±æ€§:
        topk (int): è€ƒè™‘çš„æœ€ä½³å€™é€‰æ•°é‡ã€‚
        num_classes (int): ç›®æ ‡ç±»åˆ«æ•°é‡ã€‚
        alpha (float): åˆ†ç±»ç»„ä»¶çš„alphaå‚æ•°ã€‚
        beta (float): å®šä½ç»„ä»¶çš„betaå‚æ•°ã€‚
        eps (float): é˜²æ­¢é™¤ä»¥é›¶çš„å°å€¼ã€‚
    """

    def __init__(self, topk=13, num_classes=80, alpha=1.0, beta=6.0, eps=1e-9):
        """åˆå§‹åŒ–ä»»åŠ¡å¯¹é½åˆ†é…å™¨å¯¹è±¡ï¼Œå…è®¸è‡ªå®šä¹‰è¶…å‚æ•°ã€‚"""
        super().__init__()
        self.topk = topk  # è®¾ç½®è€ƒè™‘çš„æœ€ä½³å€™é€‰æ•°é‡
        self.num_classes = num_classes  # è®¾ç½®ç›®æ ‡ç±»åˆ«æ•°é‡
        self.bg_idx = num_classes  # èƒŒæ™¯ç±»åˆ«ç´¢å¼•
        self.alpha = alpha  # åˆ†ç±»æŒ‡æ ‡çš„æƒé‡
        self.beta = beta  # å®šä½æŒ‡æ ‡çš„æƒé‡
        self.eps = eps  # é˜²æ­¢é™¤ä»¥é›¶çš„å°å€¼

    @torch.no_grad()
    def forward(self, pd_scores, pd_bboxes, anc_points, gt_labels, gt_bboxes, mask_gt):
        """
        è®¡ç®—ä»»åŠ¡å¯¹é½åˆ†é…ã€‚

        å‚æ•°:
            pd_scores (Tensor): å½¢çŠ¶ä¸º(bs, num_total_anchors, num_classes)çš„å¼ é‡ï¼Œè¡¨ç¤ºé”šç‚¹çš„é¢„æµ‹åˆ†æ•°ã€‚
            pd_bboxes (Tensor): å½¢çŠ¶ä¸º(bs, num_total_anchors, 4)çš„å¼ é‡ï¼Œè¡¨ç¤ºé”šç‚¹çš„é¢„æµ‹è¾¹ç•Œæ¡†ã€‚
            anc_points (Tensor): å½¢çŠ¶ä¸º(num_total_anchors, 2)çš„å¼ é‡ï¼Œè¡¨ç¤ºé”šç‚¹çš„åæ ‡ã€‚
            gt_labels (Tensor): å½¢çŠ¶ä¸º(bs, n_max_boxes, 1)çš„å¼ é‡ï¼Œè¡¨ç¤ºçœŸå®æ¡†çš„æ ‡ç­¾ã€‚
            gt_bboxes (Tensor): å½¢çŠ¶ä¸º(bs, n_max_boxes, 4)çš„å¼ é‡ï¼Œè¡¨ç¤ºçœŸå®æ¡†çš„åæ ‡ã€‚
            mask_gt (Tensor): å½¢çŠ¶ä¸º(bs, n_max_boxes, 1)çš„å¼ é‡ï¼Œè¡¨ç¤ºçœŸå®æ¡†çš„æ©ç ã€‚

        è¿”å›:
            target_labels (Tensor): å½¢çŠ¶ä¸º(bs, num_total_anchors)çš„å¼ é‡ï¼ŒåŒ…å«æ­£é”šç‚¹çš„ç›®æ ‡æ ‡ç­¾ã€‚
            target_bboxes (Tensor): å½¢çŠ¶ä¸º(bs, num_total_anchors, 4)çš„å¼ é‡ï¼ŒåŒ…å«æ­£é”šç‚¹çš„ç›®æ ‡è¾¹ç•Œæ¡†ã€‚
            target_scores (Tensor): å½¢çŠ¶ä¸º(bs, num_total_anchors, num_classes)çš„å¼ é‡ï¼ŒåŒ…å«æ­£é”šç‚¹çš„ç›®æ ‡åˆ†æ•°ã€‚
            fg_mask (Tensor): å½¢çŠ¶ä¸º(bs, num_total_anchors)çš„å¸ƒå°”å¼ é‡ï¼Œè¡¨ç¤ºæ­£é”šç‚¹ã€‚
            target_gt_idx (Tensor): å½¢çŠ¶ä¸º(bs, num_total_anchors)çš„å¼ é‡ï¼Œè¡¨ç¤ºæ­£é”šç‚¹å¯¹åº”çš„çœŸå®æ¡†ç´¢å¼•ã€‚
        """
        self.bs = pd_scores.size(0)  # æ‰¹æ¬¡å¤§å°
        self.n_max_boxes = gt_bboxes.size(1)  # æœ€å¤§çœŸå®æ¡†æ•°é‡

        if self.n_max_boxes == 0:  # å¦‚æœæ²¡æœ‰çœŸå®æ¡†
            device = gt_bboxes.device
            return (torch.full_like(pd_scores[..., 0], self.bg_idx).to(device), 
                    torch.zeros_like(pd_bboxes).to(device),
                    torch.zeros_like(pd_scores).to(device), 
                    torch.zeros_like(pd_scores[..., 0]).to(device),
                    torch.zeros_like(pd_scores[..., 0]).to(device))

        mask_pos, align_metric, overlaps = self.get_pos_mask(pd_scores, pd_bboxes, gt_labels, gt_bboxes, anc_points, mask_gt)

        target_gt_idx, fg_mask, mask_pos = select_highest_overlaps(mask_pos, overlaps, self.n_max_boxes)

        # åˆ†é…ç›®æ ‡
        target_labels, target_bboxes, target_scores = self.get_targets(gt_labels, gt_bboxes, target_gt_idx, fg_mask)

        # å½’ä¸€åŒ–
        align_metric *= mask_pos
        pos_align_metrics = align_metric.amax(dim=-1, keepdim=True)  # è®¡ç®—æ­£æ ·æœ¬çš„å¯¹é½æŒ‡æ ‡
        pos_overlaps = (overlaps * mask_pos).amax(dim=-1, keepdim=True)  # è®¡ç®—æ­£æ ·æœ¬çš„é‡å 
        norm_align_metric = (align_metric * pos_overlaps / (pos_align_metrics + self.eps)).amax(-2).unsqueeze(-1)
        target_scores = target_scores * norm_align_metric  # æ›´æ–°ç›®æ ‡åˆ†æ•°

        return target_labels, target_bboxes, target_scores, fg_mask.bool(), target_gt_idx

    def get_pos_mask(self, pd_scores, pd_bboxes, gt_labels, gt_bboxes, anc_points, mask_gt):
        """è·å–åœ¨çœŸå®æ¡†å†…çš„æ©ç ï¼Œå½¢çŠ¶ä¸º(b, max_num_obj, h*w)ã€‚"""
        mask_in_gts = select_candidates_in_gts(anc_points, gt_bboxes)  # è·å–åœ¨çœŸå®æ¡†å†…çš„é”šç‚¹æ©ç 
        align_metric, overlaps = self.get_box_metrics(pd_scores, pd_bboxes, gt_labels, gt_bboxes, mask_in_gts * mask_gt)  # è®¡ç®—å¯¹é½æŒ‡æ ‡å’Œé‡å 
        mask_topk = self.select_topk_candidates(align_metric, topk_mask=mask_gt.expand(-1, -1, self.topk).bool())  # é€‰æ‹©top-kå€™é€‰
        mask_pos = mask_topk * mask_in_gts * mask_gt  # åˆå¹¶æ‰€æœ‰æ©ç 

        return mask_pos, align_metric, overlaps

    def get_box_metrics(self, pd_scores, pd_bboxes, gt_labels, gt_bboxes, mask_gt):
        """è®¡ç®—ç»™å®šé¢„æµ‹å’ŒçœŸå®è¾¹ç•Œæ¡†çš„å¯¹é½æŒ‡æ ‡ã€‚"""
        na = pd_bboxes.shape[-2]  # é”šç‚¹æ•°é‡
        mask_gt = mask_gt.bool()  # è½¬æ¢ä¸ºå¸ƒå°”ç±»å‹
        overlaps = torch.zeros([self.bs, self.n_max_boxes, na], dtype=pd_bboxes.dtype, device=pd_bboxes.device)  # åˆå§‹åŒ–é‡å å¼ é‡
        bbox_scores = torch.zeros([self.bs, self.n_max_boxes, na], dtype=pd_scores.dtype, device=pd_scores.device)  # åˆå§‹åŒ–è¾¹ç•Œæ¡†åˆ†æ•°å¼ é‡

        ind = torch.zeros([2, self.bs, self.n_max_boxes], dtype=torch.long)  # åˆå§‹åŒ–ç´¢å¼•å¼ é‡
        ind[0] = torch.arange(end=self.bs).view(-1, 1).expand(-1, self.n_max_boxes)  # æ‰¹æ¬¡ç´¢å¼•
        ind[1] = gt_labels.squeeze(-1)  # çœŸå®æ¡†æ ‡ç­¾ç´¢å¼•
        bbox_scores[mask_gt] = pd_scores[ind[0], :, ind[1]][mask_gt]  # è·å–æ¯ä¸ªé”šç‚¹çš„åˆ†æ•°

        # è®¡ç®—é‡å 
        pd_boxes = pd_bboxes.unsqueeze(1).expand(-1, self.n_max_boxes, -1, -1)[mask_gt]  # æ‰©å±•é¢„æµ‹è¾¹ç•Œæ¡†
        gt_boxes = gt_bboxes.unsqueeze(2).expand(-1, -1, na, -1)[mask_gt]  # æ‰©å±•çœŸå®è¾¹ç•Œæ¡†
        overlaps[mask_gt] = bbox_iou(gt_boxes, pd_boxes, xywh=False, CIoU=True).squeeze(-1).clamp_(0)  # è®¡ç®—IoUé‡å 

        align_metric = bbox_scores.pow(self.alpha) * overlaps.pow(self.beta)  # è®¡ç®—å¯¹é½æŒ‡æ ‡
        return align_metric, overlaps

    def get_targets(self, gt_labels, gt_bboxes, target_gt_idx, fg_mask):
        """
        è®¡ç®—æ­£é”šç‚¹çš„ç›®æ ‡æ ‡ç­¾ã€ç›®æ ‡è¾¹ç•Œæ¡†å’Œç›®æ ‡åˆ†æ•°ã€‚

        å‚æ•°:
            gt_labels (Tensor): çœŸå®æ¡†æ ‡ç­¾ï¼Œå½¢çŠ¶ä¸º(b, max_num_obj, 1)ã€‚
            gt_bboxes (Tensor): çœŸå®æ¡†è¾¹ç•Œæ¡†ï¼Œå½¢çŠ¶ä¸º(b, max_num_obj, 4)ã€‚
            target_gt_idx (Tensor): æ­£é”šç‚¹åˆ†é…çš„çœŸå®æ¡†ç´¢å¼•ï¼Œå½¢çŠ¶ä¸º(b, h*w)ã€‚
            fg_mask (Tensor): å¸ƒå°”å¼ é‡ï¼Œå½¢çŠ¶ä¸º(b, h*w)ï¼Œè¡¨ç¤ºæ­£é”šç‚¹ã€‚

        è¿”å›:
            (Tuple[Tensor, Tensor, Tensor]): åŒ…å«ä»¥ä¸‹å¼ é‡çš„å…ƒç»„ï¼š
                - target_labels (Tensor): å½¢çŠ¶ä¸º(b, h*w)ï¼ŒåŒ…å«æ­£é”šç‚¹çš„ç›®æ ‡æ ‡ç­¾ã€‚
                - target_bboxes (Tensor): å½¢çŠ¶ä¸º(b, h*w, 4)ï¼ŒåŒ…å«æ­£é”šç‚¹çš„ç›®æ ‡è¾¹ç•Œæ¡†ã€‚
                - target_scores (Tensor): å½¢çŠ¶ä¸º(b, h*w, num_classes)ï¼ŒåŒ…å«æ­£é”šç‚¹çš„ç›®æ ‡åˆ†æ•°ã€‚
        """
        batch_ind = torch.arange(end=self.bs, dtype=torch.int64, device=gt_labels.device)[..., None]
        target_gt_idx = target_gt_idx + batch_ind * self.n_max_boxes  # è®¡ç®—ç›®æ ‡çœŸå®æ¡†ç´¢å¼•
        target_labels = gt_labels.long().flatten()[target_gt_idx]  # è·å–ç›®æ ‡æ ‡ç­¾

        target_bboxes = gt_bboxes.view(-1, 4)[target_gt_idx]  # è·å–ç›®æ ‡è¾¹ç•Œæ¡†

        target_labels.clamp_(0)  # é™åˆ¶æ ‡ç­¾èŒƒå›´

        # 10å€äºF.one_hot()çš„é€Ÿåº¦
        target_scores = torch.zeros((target_labels.shape[0], target_labels.shape[1], self.num_classes),
                                    dtype=torch.int64,
                                    device=target_labels.device)  # åˆå§‹åŒ–ç›®æ ‡åˆ†æ•°å¼ é‡
        target_scores.scatter_(2, target_labels.unsqueeze(-1), 1)  # å¡«å……ç›®æ ‡åˆ†æ•°

        fg_scores_mask = fg_mask[:, :, None].repeat(1, 1, self.num_classes)  # æ‰©å±•å‰æ™¯åˆ†æ•°æ©ç 
        target_scores = torch.where(fg_scores_mask > 0, target_scores, 0)  # ä»…ä¿ç•™å‰æ™¯åˆ†æ•°

        return target_labels, target_bboxes, target_scores
```

ä»¥ä¸Šä»£ç æ˜¯YOLOç›®æ ‡æ£€æµ‹æ¨¡å‹ä¸­çš„ä»»åŠ¡å¯¹é½åˆ†é…å™¨çš„æ ¸å¿ƒéƒ¨åˆ†ï¼Œä¸»è¦è´Ÿè´£å°†çœŸå®æ¡†ä¸é”šç‚¹è¿›è¡ŒåŒ¹é…ï¼Œå¹¶è®¡ç®—ç›¸åº”çš„ç›®æ ‡æ ‡ç­¾ã€è¾¹ç•Œæ¡†å’Œåˆ†æ•°ã€‚é€šè¿‡å¯¹é”šç‚¹çš„é€‰æ‹©ã€å¯¹é½æŒ‡æ ‡çš„è®¡ç®—å’Œç›®æ ‡çš„ç”Ÿæˆï¼Œæ¨¡å‹èƒ½å¤Ÿæ›´å¥½åœ°è¿›è¡Œç›®æ ‡æ£€æµ‹ä»»åŠ¡ã€‚

è¿™ä¸ªç¨‹åºæ–‡ä»¶æ˜¯YOLOv8ç®—æ³•ä¸­çš„ä¸€ä¸ªé‡è¦æ¨¡å—ï¼Œä¸»è¦è´Ÿè´£ç›®æ ‡æ£€æµ‹ä¸­çš„ä»»åŠ¡å¯¹é½åˆ†é…ï¼ˆTask-Aligned Assignmentï¼‰ã€‚è¯¥æ¨¡å—é€šè¿‡ç»“åˆåˆ†ç±»å’Œå®šä½ä¿¡æ¯ï¼Œå°†çœŸå®ç›®æ ‡ï¼ˆground truthï¼‰ä¸é”šæ¡†ï¼ˆanchor boxesï¼‰è¿›è¡Œæœ‰æ•ˆåŒ¹é…ã€‚ä»¥ä¸‹æ˜¯å¯¹ä»£ç çš„è¯¦ç»†è¯´æ˜ã€‚

é¦–å…ˆï¼Œç¨‹åºå¯¼å…¥äº†å¿…è¦çš„åº“ï¼ŒåŒ…æ‹¬PyTorchå’Œä¸€äº›è‡ªå®šä¹‰çš„å·¥å…·å‡½æ•°ã€‚æ¥ç€ï¼Œå®šä¹‰äº†ä¸€ä¸ªå‡½æ•°`select_candidates_in_gts`ï¼Œç”¨äºé€‰æ‹©åœ¨çœŸå®ç›®æ ‡æ¡†å†…çš„æ­£é”šæ¡†ä¸­å¿ƒã€‚è¯¥å‡½æ•°æ¥å—é”šæ¡†ä¸­å¿ƒå’ŒçœŸå®ç›®æ ‡æ¡†ä½œä¸ºè¾“å…¥ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å¼ é‡ï¼ŒæŒ‡ç¤ºå“ªäº›é”šæ¡†ä¸­å¿ƒä½äºçœŸå®ç›®æ ‡æ¡†å†…ã€‚

æ¥ä¸‹æ¥ï¼Œå®šä¹‰äº†`select_highest_overlaps`å‡½æ•°ï¼Œè¯¥å‡½æ•°ç”¨äºå¤„ç†å½“ä¸€ä¸ªé”šæ¡†è¢«å¤šä¸ªçœŸå®ç›®æ ‡æ¡†åˆ†é…æ—¶çš„æƒ…å†µã€‚å®ƒé€‰æ‹©ä¸æ¯ä¸ªé”šæ¡†é‡å åº¦æœ€é«˜çš„çœŸå®ç›®æ ‡æ¡†ï¼Œå¹¶è¿”å›ç›¸å…³çš„ç´¢å¼•å’Œæ©ç ã€‚

`TaskAlignedAssigner`ç±»æ˜¯è¿™ä¸ªæ¨¡å—çš„æ ¸å¿ƒéƒ¨åˆ†ï¼Œç»§æ‰¿è‡ª`nn.Module`ã€‚å®ƒçš„æ„é€ å‡½æ•°åˆå§‹åŒ–äº†ä¸€äº›è¶…å‚æ•°ï¼ŒåŒ…æ‹¬è€ƒè™‘çš„å€™é€‰æ¡†æ•°é‡ã€ç±»åˆ«æ•°é‡ã€åˆ†ç±»å’Œå®šä½çš„æƒé‡ç­‰ã€‚åœ¨`forward`æ–¹æ³•ä¸­ï¼Œç±»æ¥å—é¢„æµ‹çš„åˆ†æ•°ã€è¾¹ç•Œæ¡†ã€é”šç‚¹ã€çœŸå®æ ‡ç­¾å’Œè¾¹ç•Œæ¡†ç­‰ä¿¡æ¯ï¼Œè®¡ç®—ä»»åŠ¡å¯¹é½çš„åˆ†é…ã€‚

åœ¨`forward`æ–¹æ³•ä¸­ï¼Œé¦–å…ˆæ£€æŸ¥çœŸå®ç›®æ ‡æ¡†çš„æ•°é‡ï¼Œå¦‚æœæ²¡æœ‰ç›®æ ‡æ¡†ï¼Œåˆ™è¿”å›èƒŒæ™¯ç´¢å¼•å’Œé›¶å¼ é‡ã€‚ç„¶åï¼Œè°ƒç”¨`get_pos_mask`æ–¹æ³•è·å–æ­£é”šæ¡†çš„æ©ç ã€å¯¹é½åº¦é‡å’Œé‡å åº¦ã€‚æ¥ç€ï¼Œä½¿ç”¨`select_highest_overlaps`å‡½æ•°é€‰æ‹©é‡å åº¦æœ€é«˜çš„çœŸå®ç›®æ ‡æ¡†ï¼Œå¹¶æ ¹æ®è¿™äº›ä¿¡æ¯è·å–ç›®æ ‡æ ‡ç­¾ã€è¾¹ç•Œæ¡†å’Œåˆ†æ•°ã€‚

`get_pos_mask`æ–¹æ³•è´Ÿè´£è·å–æ­£é”šæ¡†çš„æ©ç ï¼Œå®ƒè°ƒç”¨`select_candidates_in_gts`å’Œ`get_box_metrics`æ¥è®¡ç®—å¯¹é½åº¦é‡å’Œé‡å åº¦ã€‚`get_box_metrics`æ–¹æ³•åˆ™è®¡ç®—é¢„æµ‹æ¡†å’ŒçœŸå®æ¡†ä¹‹é—´çš„å¯¹é½åº¦é‡ã€‚

æ­¤å¤–ï¼Œ`select_topk_candidates`æ–¹æ³•ç”¨äºé€‰æ‹©å‰kä¸ªå€™é€‰æ¡†ï¼Œ`get_targets`æ–¹æ³•åˆ™è®¡ç®—æ­£é”šæ¡†çš„ç›®æ ‡æ ‡ç­¾ã€è¾¹ç•Œæ¡†å’Œåˆ†æ•°ã€‚

æœ€åï¼Œæ–‡ä»¶ä¸­è¿˜å®šä¹‰äº†ä¸€äº›è¾…åŠ©å‡½æ•°ï¼Œå¦‚`make_anchors`ç”¨äºç”Ÿæˆé”šæ¡†ï¼Œ`dist2bbox`å’Œ`bbox2dist`ç”¨äºåœ¨é”šæ¡†å’Œè¾¹ç•Œæ¡†ä¹‹é—´è¿›è¡Œè½¬æ¢ã€‚è¿™äº›å‡½æ•°ä¸ºç›®æ ‡æ£€æµ‹æä¾›äº†å¿…è¦çš„æ”¯æŒï¼Œä½¿å¾—æ¨¡å‹èƒ½å¤Ÿæ›´å¥½åœ°å­¦ä¹ å’Œé¢„æµ‹ç›®æ ‡çš„ä½ç½®å’Œç±»åˆ«ã€‚

æ•´ä½“è€Œè¨€ï¼Œè¿™ä¸ªæ¨¡å—é€šè¿‡ä»»åŠ¡å¯¹é½çš„æ–¹å¼ä¼˜åŒ–äº†ç›®æ ‡æ£€æµ‹ä¸­çš„é”šæ¡†åˆ†é…ï¼Œæé«˜äº†æ¨¡å‹çš„å‡†ç¡®æ€§å’Œæ•ˆç‡ã€‚

#### 11.6 70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰\ultralytics\utils\callbacks\wb.py

ä»¥ä¸‹æ˜¯ç»è¿‡ç®€åŒ–å’Œæ³¨é‡Šçš„æ ¸å¿ƒä»£ç éƒ¨åˆ†ï¼Œä¸»è¦ä¿ç•™äº†ä¸WandBï¼ˆWeights and Biasesï¼‰é›†æˆå’Œå¯è§†åŒ–ç›¸å…³çš„åŠŸèƒ½ï¼š

```python
# å¯¼å…¥å¿…è¦çš„åº“
from ultralytics.utils import SETTINGS, TESTS_RUNNING
from ultralytics.utils.torch_utils import model_info_for_loggers
import numpy as np
import pandas as pd

# å°è¯•å¯¼å…¥WandBåº“å¹¶è¿›è¡ŒåŸºæœ¬çš„æ£€æŸ¥
try:
    assert not TESTS_RUNNING  # ç¡®ä¿ä¸æ˜¯åœ¨æµ‹è¯•ç¯å¢ƒä¸­
    assert SETTINGS['wandb'] is True  # ç¡®ä¿WandBé›†æˆå·²å¯ç”¨
    import wandb as wb
    assert hasattr(wb, '__version__')  # ç¡®ä¿WandBåŒ…å·²æ­£ç¡®å¯¼å…¥
except (ImportError, AssertionError):
    wb = None  # å¦‚æœå¯¼å…¥å¤±è´¥ï¼Œè®¾ç½®wbä¸ºNone

# è‡ªå®šä¹‰è¡¨æ ¼å‡½æ•°ï¼Œç”¨äºåˆ›å»ºå’Œè®°å½•ç²¾ç¡®åº¦-å¬å›æ›²çº¿
def _custom_table(x, y, classes, title='Precision Recall Curve', x_title='Recall', y_title='Precision'):
    """
    åˆ›å»ºå¹¶è®°å½•è‡ªå®šä¹‰çš„ç²¾ç¡®åº¦-å¬å›æ›²çº¿å¯è§†åŒ–ã€‚
    """
    # åˆ›å»ºåŒ…å«ç±»ã€yå€¼å’Œxå€¼çš„æ•°æ®æ¡†
    df = pd.DataFrame({'class': classes, 'y': y, 'x': x}).round(3)
    fields = {'x': 'x', 'y': 'y', 'class': 'class'}
    string_fields = {'title': title, 'x-axis-title': x_title, 'y-axis-title': y_title}
    
    # è¿”å›WandBçš„è¡¨æ ¼å¯¹è±¡
    return wb.plot_table('wandb/area-under-curve/v0',
                         wb.Table(dataframe=df),
                         fields=fields,
                         string_fields=string_fields)

# ç»˜åˆ¶æ›²çº¿çš„å‡½æ•°
def _plot_curve(x, y, names=None, id='precision-recall', title='Precision Recall Curve', x_title='Recall', y_title='Precision', num_x=100, only_mean=False):
    """
    è®°å½•ä¸€ä¸ªåº¦é‡æ›²çº¿çš„å¯è§†åŒ–ã€‚
    """
    # ç”Ÿæˆæ–°çš„xå€¼
    if names is None:
        names = []
    x_new = np.linspace(x[0], x[-1], num_x).round(5)

    # åˆ›å»ºç”¨äºè®°å½•çš„æ•°ç»„
    x_log = x_new.tolist()
    y_log = np.interp(x_new, x, np.mean(y, axis=0)).round(3).tolist()

    # å¦‚æœåªç»˜åˆ¶å‡å€¼æ›²çº¿
    if only_mean:
        table = wb.Table(data=list(zip(x_log, y_log)), columns=[x_title, y_title])
        wb.run.log({title: wb.plot.line(table, x_title, y_title, title=title)})
    else:
        classes = ['mean'] * len(x_log)
        for i, yi in enumerate(y):
            x_log.extend(x_new)  # æ·»åŠ æ–°çš„xå€¼
            y_log.extend(np.interp(x_new, x, yi))  # å¯¹yè¿›è¡Œæ’å€¼
            classes.extend([names[i]] * len(x_new))  # æ·»åŠ ç±»å
        wb.log({id: _custom_table(x_log, y_log, classes, title, x_title, y_title)}, commit=False)

# è®­ç»ƒå¼€å§‹æ—¶çš„å›è°ƒå‡½æ•°
def on_pretrain_routine_start(trainer):
    """å¦‚æœæ¨¡å—å­˜åœ¨ï¼Œåˆ™åˆå§‹åŒ–å¹¶å¯åŠ¨é¡¹ç›®ã€‚"""
    wb.run or wb.init(project=trainer.args.project or 'YOLOv8', name=trainer.args.name, config=vars(trainer.args))

# è®­ç»ƒæ¯ä¸ªepochç»“æŸæ—¶çš„å›è°ƒå‡½æ•°
def on_fit_epoch_end(trainer):
    """åœ¨æ¯ä¸ªepochç»“æŸæ—¶è®°å½•è®­ç»ƒæŒ‡æ ‡å’Œæ¨¡å‹ä¿¡æ¯ã€‚"""
    wb.run.log(trainer.metrics, step=trainer.epoch + 1)

# è®­ç»ƒç»“æŸæ—¶çš„å›è°ƒå‡½æ•°
def on_train_end(trainer):
    """åœ¨è®­ç»ƒç»“æŸæ—¶ä¿å­˜æœ€ä½³æ¨¡å‹ä½œä¸ºartifactã€‚"""
    art = wb.Artifact(type='model', name=f'run_{wb.run.id}_model')
    if trainer.best.exists():
        art.add_file(trainer.best)
        wb.run.log_artifact(art, aliases=['best'])
    wb.run.finish()  # ç»“æŸWandBè¿è¡Œ

# å®šä¹‰å›è°ƒå‡½æ•°å­—å…¸
callbacks = {
    'on_pretrain_routine_start': on_pretrain_routine_start,
    'on_fit_epoch_end': on_fit_epoch_end,
    'on_train_end': on_train_end
} if wb else {}
```

### ä»£ç æ³¨é‡Šè¯´æ˜ï¼š
1. **å¯¼å…¥éƒ¨åˆ†**ï¼šå¯¼å…¥äº†å¿…è¦çš„åº“ï¼ŒåŒ…æ‹¬WandBã€NumPyå’ŒPandasã€‚
2. **WandBåˆå§‹åŒ–**ï¼šåœ¨å°è¯•å¯¼å…¥WandBæ—¶ï¼Œè¿›è¡Œäº†ä¸€äº›åŸºæœ¬çš„æ£€æŸ¥ï¼Œç¡®ä¿ç¯å¢ƒè®¾ç½®æ­£ç¡®ã€‚
3. **è‡ªå®šä¹‰è¡¨æ ¼å‡½æ•°**ï¼š`_custom_table`å‡½æ•°ç”¨äºåˆ›å»ºå’Œè®°å½•ç²¾ç¡®åº¦-å¬å›æ›²çº¿çš„å¯è§†åŒ–ã€‚
4. **ç»˜åˆ¶æ›²çº¿å‡½æ•°**ï¼š`_plot_curve`å‡½æ•°ç”¨äºç”Ÿæˆå’Œè®°å½•åº¦é‡æ›²çº¿ï¼Œå¯ä»¥é€‰æ‹©ç»˜åˆ¶å‡å€¼æ›²çº¿æˆ–æ¯ä¸ªç±»çš„æ›²çº¿ã€‚
5. **å›è°ƒå‡½æ•°**ï¼šå®šä¹‰äº†å‡ ä¸ªå›è°ƒå‡½æ•°ï¼Œåœ¨è®­ç»ƒçš„ä¸åŒé˜¶æ®µï¼ˆå¦‚å¼€å§‹ã€æ¯ä¸ªepochç»“æŸå’Œè®­ç»ƒç»“æŸï¼‰è®°å½•ç›¸å…³çš„æŒ‡æ ‡å’Œæ¨¡å‹ä¿¡æ¯ã€‚

è¿™ä¸ªç¨‹åºæ–‡ä»¶æ˜¯ç”¨äºé›†æˆå’Œè®°å½•YOLOv8æ¨¡å‹è®­ç»ƒè¿‡ç¨‹ä¸­çš„å„ç§æŒ‡æ ‡å’Œå¯è§†åŒ–å›¾è¡¨ï¼Œä¸»è¦é€šè¿‡WandBï¼ˆWeights and Biasesï¼‰å·¥å…·è¿›è¡Œç›‘æ§å’Œè®°å½•ã€‚æ–‡ä»¶çš„å¼€å¤´éƒ¨åˆ†å¯¼å…¥äº†ä¸€äº›å¿…è¦çš„åº“å’Œæ¨¡å—ï¼Œå¹¶è¿›è¡Œäº†ç¯å¢ƒçš„æ£€æŸ¥ï¼Œç¡®ä¿åœ¨è¿è¡Œæ—¶ä¸å¤„äºæµ‹è¯•çŠ¶æ€ï¼Œå¹¶ä¸”WandBé›†æˆå·²å¯ç”¨ã€‚

æ–‡ä»¶ä¸­å®šä¹‰äº†å‡ ä¸ªä¸»è¦çš„å‡½æ•°ã€‚é¦–å…ˆæ˜¯`_custom_table`å‡½æ•°ï¼Œå®ƒç”¨äºåˆ›å»ºå’Œè®°å½•ä¸€ä¸ªè‡ªå®šä¹‰çš„ç²¾ç¡®åº¦-å¬å›æ›²çº¿çš„å¯è§†åŒ–ã€‚è¯¥å‡½æ•°æ¥å—xè½´å’Œyè½´çš„æ•°æ®ï¼Œä»¥åŠç±»æ ‡ç­¾ï¼Œå¹¶å°†è¿™äº›æ•°æ®ç»„ç»‡æˆä¸€ä¸ªPandas DataFrameï¼Œæœ€åé€šè¿‡WandBçš„APIç”Ÿæˆä¸€ä¸ªå¯è®°å½•çš„è¡¨æ ¼ã€‚

æ¥ä¸‹æ¥æ˜¯`_plot_curve`å‡½æ•°ï¼Œå®ƒç”Ÿæˆä¸€ä¸ªåº¦é‡æ›²çº¿çš„å¯è§†åŒ–å›¾è¡¨ã€‚è¿™ä¸ªå‡½æ•°å¯ä»¥å¤„ç†å¤šç±»æ•°æ®ï¼Œå¹¶æ ¹æ®è¾“å…¥çš„å‚æ•°å†³å®šæ˜¯å¦åªç»˜åˆ¶å¹³å‡æ›²çº¿ã€‚å®ƒé€šè¿‡æ’å€¼æ–¹æ³•ç”Ÿæˆæ–°çš„xå€¼ï¼Œå¹¶å°†yå€¼ä¸è¿™äº›æ–°xå€¼å¯¹åº”ï¼Œæœ€ç»ˆè°ƒç”¨`_custom_table`å‡½æ•°è®°å½•ç»“æœã€‚

`_log_plots`å‡½æ•°ç”¨äºè®°å½•è¾“å…¥å­—å…¸ä¸­çš„å›¾è¡¨ï¼Œå¦‚æœè¿™äº›å›¾è¡¨åœ¨æŒ‡å®šçš„æ­¥éª¤ä¸­å°šæœªè®°å½•ã€‚å®ƒä¼šæ£€æŸ¥æ¯ä¸ªå›¾è¡¨çš„æ—¶é—´æˆ³ï¼Œä»¥é¿å…é‡å¤è®°å½•ã€‚

æ¥ä¸‹æ¥çš„å‡ ä¸ªå‡½æ•°æ˜¯ä¸è®­ç»ƒè¿‡ç¨‹ä¸­çš„ä¸åŒé˜¶æ®µç›¸å…³çš„å›è°ƒå‡½æ•°ã€‚`on_pretrain_routine_start`å‡½æ•°åœ¨é¢„è®­ç»ƒä¾‹ç¨‹å¼€å§‹æ—¶è¢«è°ƒç”¨ï¼Œåˆå§‹åŒ–WandBé¡¹ç›®ã€‚`on_fit_epoch_end`å‡½æ•°åœ¨æ¯ä¸ªè®­ç»ƒå‘¨æœŸç»“æŸæ—¶è®°å½•è®­ç»ƒæŒ‡æ ‡å’Œæ¨¡å‹ä¿¡æ¯ã€‚`on_train_epoch_end`å‡½æ•°åˆ™åœ¨æ¯ä¸ªè®­ç»ƒå‘¨æœŸç»“æŸæ—¶è®°å½•æŸå¤±å’Œå­¦ä¹ ç‡ï¼Œå¹¶åœ¨ç‰¹å®šæ¡ä»¶ä¸‹è®°å½•å›¾è¡¨ã€‚

æœ€åï¼Œ`on_train_end`å‡½æ•°åœ¨è®­ç»ƒç»“æŸæ—¶è¢«è°ƒç”¨ï¼Œè´Ÿè´£ä¿å­˜æœ€ä½³æ¨¡å‹å¹¶è®°å½•éªŒè¯æŒ‡æ ‡çš„æ›²çº¿ã€‚è¯¥å‡½æ•°è¿˜ç¡®ä¿WandBçš„è¿è¡Œç»“æŸï¼Œä»¥ä¾¿åœ¨ä»ªè¡¨æ¿ä¸Šæ­£ç¡®æ˜¾ç¤ºã€‚

æ–‡ä»¶çš„æœ€åéƒ¨åˆ†å®šä¹‰äº†ä¸€ä¸ªå›è°ƒå­—å…¸ï¼ŒåŒ…å«äº†åœ¨WandBå¯ç”¨æ—¶éœ€è¦è°ƒç”¨çš„å„ä¸ªå›è°ƒå‡½æ•°ã€‚æ•´ä½“æ¥çœ‹ï¼Œè¿™ä¸ªæ–‡ä»¶ä¸ºYOLOv8æ¨¡å‹çš„è®­ç»ƒè¿‡ç¨‹æä¾›äº†ä¸€ä¸ªç»“æ„åŒ–çš„è®°å½•å’Œå¯è§†åŒ–æ–¹æ¡ˆï¼Œä¾¿äºå¼€å‘è€…ç›‘æ§æ¨¡å‹æ€§èƒ½å’Œè®­ç»ƒè¿›åº¦ã€‚

### 12.ç³»ç»Ÿæ•´ä½“ç»“æ„ï¼ˆèŠ‚é€‰ï¼‰

### æ•´ä½“åŠŸèƒ½å’Œæ„æ¶æ¦‚æ‹¬

è¯¥é¡¹ç›®æ˜¯ä¸€ä¸ªåŸºäºYOLOv8çš„ç›®æ ‡æ£€æµ‹æ¡†æ¶ï¼ŒåŒ…å«äº†æ¨¡å‹è®­ç»ƒã€è·Ÿè¸ªã€æ•°æ®å¤„ç†ã€é”™è¯¯å¤„ç†å’Œå¯è§†åŒ–ç­‰å¤šä¸ªæ¨¡å—ã€‚å…¶ä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼š

1. **ç›®æ ‡æ£€æµ‹**ï¼šå®ç°YOLOv8æ¨¡å‹çš„è®­ç»ƒå’Œæ¨ç†ï¼Œæ”¯æŒå¤šç§ç›®æ ‡æ£€æµ‹ä»»åŠ¡ã€‚
2. **å¯¹è±¡è·Ÿè¸ª**ï¼šé€šè¿‡`bot_sort.py`å®ç°åŸºäºYOLOv8çš„å¯¹è±¡è·Ÿè¸ªåŠŸèƒ½ã€‚
3. **æ•°æ®å¤„ç†**ï¼šåŒ…æ‹¬æ•°æ®é›†çš„æ„å»ºã€åŠ è½½å’Œé¢„å¤„ç†ï¼Œç¡®ä¿è®­ç»ƒè¿‡ç¨‹ä¸­çš„æ•°æ®è´¨é‡ã€‚
4. **é”™è¯¯å¤„ç†**ï¼šæä¾›è‡ªå®šä¹‰å¼‚å¸¸ç±»ï¼Œå¤„ç†æ¨¡å‹è·å–è¿‡ç¨‹ä¸­çš„é”™è¯¯ã€‚
5. **è®­ç»ƒç›‘æ§**ï¼šé€šè¿‡WandBé›†æˆè®°å½•è®­ç»ƒè¿‡ç¨‹ä¸­çš„æŒ‡æ ‡å’Œå¯è§†åŒ–å›¾è¡¨ï¼Œä¾¿äºç›‘æ§æ¨¡å‹æ€§èƒ½ã€‚
6. **æ¨¡å—åŒ–è®¾è®¡**ï¼šå„ä¸ªåŠŸèƒ½æ¨¡å—ç›¸å¯¹ç‹¬ç«‹ï¼Œä¾¿äºç»´æŠ¤å’Œæ‰©å±•ã€‚

### æ–‡ä»¶åŠŸèƒ½æ•´ç†è¡¨

| æ–‡ä»¶è·¯å¾„                                                                                         | åŠŸèƒ½æè¿°                                                                                         |
|--------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------|
| `code\ultralytics\trackers\bot_sort.py`                                                         | å®ç°åŸºäºYOLOv8çš„å¯¹è±¡è·Ÿè¸ªåŠŸèƒ½ï¼ŒåŒ…å«`BOTrack`å’Œ`BOTSORT`ç±»ï¼Œç»“åˆReIDå’ŒGMCç®—æ³•è¿›è¡Œå¯¹è±¡è·Ÿè¸ªã€‚         |
| `ui.py`                                                                                         | è¿è¡ŒæŒ‡å®šçš„Streamlitåº”ç”¨è„šæœ¬ï¼Œæä¾›ä¸€ä¸ªç®€å•çš„ç”¨æˆ·ç•Œé¢æ¥å¯åŠ¨YOLOv8æ¨¡å‹çš„ç›¸å…³åŠŸèƒ½ã€‚                     |
| `70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰\ultralytics\utils\errors.py`           | å®šä¹‰è‡ªå®šä¹‰å¼‚å¸¸ç±»`HUBModelError`ï¼Œç”¨äºå¤„ç†æ¨¡å‹è·å–è¿‡ç¨‹ä¸­çš„é”™è¯¯ã€‚                                  |
| `train.py`                                                                                      | è´Ÿè´£YOLOæ¨¡å‹çš„è®­ç»ƒè¿‡ç¨‹ï¼ŒåŒ…æ‹¬æ•°æ®é›†æ„å»ºã€æ¨¡å‹åˆå§‹åŒ–ã€è®­ç»ƒå¾ªç¯å’ŒæŸå¤±è®°å½•ç­‰åŠŸèƒ½ã€‚                     |
| `70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰\ultralytics\utils\tal.py`             | å®ç°ä»»åŠ¡å¯¹é½åˆ†é…åŠŸèƒ½ï¼Œé€šè¿‡è®¡ç®—é”šæ¡†ä¸çœŸå®ç›®æ ‡æ¡†çš„åŒ¹é…ï¼Œæé«˜ç›®æ ‡æ£€æµ‹çš„å‡†ç¡®æ€§ã€‚                       |
| `70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰\ultralytics\utils\callbacks\wb.py`   | é›†æˆWandBè¿›è¡Œè®­ç»ƒè¿‡ç¨‹çš„ç›‘æ§å’Œè®°å½•ï¼Œæ”¯æŒå¯è§†åŒ–å›¾è¡¨å’ŒæŒ‡æ ‡çš„è®°å½•ã€‚                                    |
| `code\ultralytics\utils\instance.py`                                                           | æä¾›ä¸å®ä¾‹ç›¸å…³çš„å·¥å…·å‡½æ•°ï¼Œå¯èƒ½åŒ…æ‹¬å®ä¾‹åŒ–æ¨¡å‹å’Œå¤„ç†å®ä¾‹æ•°æ®çš„åŠŸèƒ½ã€‚                                 |
| `code\ultralytics\data\explorer\explorer.py`                                                  | æä¾›æ•°æ®é›†æ¢ç´¢å’Œå¯è§†åŒ–åŠŸèƒ½ï¼Œå¸®åŠ©ç”¨æˆ·ç†è§£æ•°æ®é›†çš„ç»“æ„å’Œå†…å®¹ã€‚                                      |
| `70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰\ultralytics\models\yolo\pose\val.py`  | å®ç°YOLOv8å§¿æ€ä¼°è®¡æ¨¡å‹çš„éªŒè¯åŠŸèƒ½ï¼Œè¯„ä¼°æ¨¡å‹åœ¨å§¿æ€ä¼°è®¡ä»»åŠ¡ä¸Šçš„æ€§èƒ½ã€‚                               |
| `code\ultralytics\models\yolo\segment\__init__.py`                                            | åˆå§‹åŒ–YOLOv8åˆ†å‰²æ¨¡å‹æ¨¡å—ï¼Œå¯èƒ½åŒ…å«æ¨¡å‹çš„å®šä¹‰å’ŒåŠ è½½åŠŸèƒ½ã€‚                                          |
| `code\log.py`                                                                                    | å¤„ç†æ—¥å¿—è®°å½•åŠŸèƒ½ï¼Œå¯èƒ½åŒ…æ‹¬è®­ç»ƒè¿‡ç¨‹ä¸­çš„ä¿¡æ¯è¾“å‡ºå’Œé”™è¯¯è®°å½•ã€‚                                        |
| `code\ultralytics\models\yolo\classify\train.py`                                              | å®ç°YOLOv8åˆ†ç±»æ¨¡å‹çš„è®­ç»ƒè¿‡ç¨‹ï¼Œæ”¯æŒåˆ†ç±»ä»»åŠ¡çš„è®­ç»ƒå’Œè¯„ä¼°ã€‚                                          |
| `70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰\ultralytics\nn\autobackend.py`        | æä¾›è‡ªåŠ¨åç«¯å¤„ç†åŠŸèƒ½ï¼Œå¯èƒ½ç”¨äºæ¨¡å‹çš„è‡ªåŠ¨åŠ è½½å’Œé…ç½®ã€‚                                              |

è¿™ä¸ªè¡¨æ ¼æ€»ç»“äº†æ¯ä¸ªæ–‡ä»¶çš„ä¸»è¦åŠŸèƒ½ï¼Œå¸®åŠ©ç†è§£æ•´ä¸ªé¡¹ç›®çš„ç»“æ„å’Œå„ä¸ªæ¨¡å—ä¹‹é—´çš„å…³ç³»ã€‚

æ³¨æ„ï¼šç”±äºæ­¤åšå®¢ç¼–è¾‘è¾ƒæ—©ï¼Œä¸Šé¢â€œ11.é¡¹ç›®æ ¸å¿ƒæºç è®²è§£ï¼ˆå†ä¹Ÿä¸ç”¨æ‹…å¿ƒçœ‹ä¸æ‡‚ä»£ç é€»è¾‘ï¼‰â€ä¸­éƒ¨åˆ†ä»£ç å¯èƒ½ä¼šä¼˜åŒ–å‡çº§ï¼Œä»…ä¾›å‚è€ƒå­¦ä¹ ï¼Œå®Œæ•´â€œè®­ç»ƒæºç â€ã€â€œWebå‰ç«¯ç•Œé¢â€å’Œâ€œ70+ç§åˆ›æ–°ç‚¹æºç â€ä»¥â€œ13.å®Œæ•´è®­ç»ƒ+Webå‰ç«¯ç•Œé¢+70+ç§åˆ›æ–°ç‚¹æºç ã€æ•°æ®é›†è·å–â€çš„å†…å®¹ä¸ºå‡†ã€‚

### 13.å®Œæ•´è®­ç»ƒ+Webå‰ç«¯ç•Œé¢+70+ç§åˆ›æ–°ç‚¹æºç ã€æ•°æ®é›†è·å–

![19.png](19.png)


# [ä¸‹è½½é“¾æ¥ï¼šD:\tools\20240905\Temporary](D:\tools\20240905\Temporary)